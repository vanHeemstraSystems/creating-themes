<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.335">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Learning - Themes</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>
<script type="module" src="site_libs/quarto-ojs/quarto-ojs-runtime.js"></script>
<link href="site_libs/quarto-ojs/quarto-ojs.css" rel="stylesheet">


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Learning - Themes</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page">
 <span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="./about.html">
 <span class="menu-text">About</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#master-automation" id="toc-master-automation" class="nav-link active" data-scroll-target="#master-automation">Master Automation</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Learning - Themes</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  

</header>

<p>This is a Quarto website.</p>
<p>To learn more about Quarto websites visit <a href="https://quarto.org/docs/websites" class="uri">https://quarto.org/docs/websites</a>.</p>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb1" data-startfrom="10" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 9;"><span id="cb1-10"><a href="#cb1-10" aria-hidden="true" tabindex="-1"></a>__page <span class="op">=</span> <span class="fu">hostedOnThumbtools</span>()</span>
<span id="cb1-11"><a href="#cb1-11" aria-hidden="true" tabindex="-1"></a>  <span class="op">?</span> <span class="fu">pageRenderer</span>(graphData<span class="op">,</span> width<span class="op">,</span> height<span class="op">,</span> <span class="kw">false</span>)</span>
<span id="cb1-12"><a href="#cb1-12" aria-hidden="true" tabindex="-1"></a>  <span class="op">:</span> <span class="fu">pageRenderer</span>(graphData<span class="op">,</span> width<span class="op">,</span> <span class="dv">800</span><span class="op">,</span> <span class="kw">true</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-1" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb2" data-startfrom="17" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 16;"><span id="cb2-17"><a href="#cb2-17" aria-hidden="true" tabindex="-1"></a>viewof linkColor <span class="op">=</span> <span class="fu">color</span>({</span>
<span id="cb2-18"><a href="#cb2-18" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="st">"#aaaaaa"</span><span class="op">,</span></span>
<span id="cb2-19"><a href="#cb2-19" aria-hidden="true" tabindex="-1"></a>  <span class="dt">title</span><span class="op">:</span> <span class="st">"Link Color"</span></span>
<span id="cb2-20"><a href="#cb2-20" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-2" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb3" data-startfrom="25" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 24;"><span id="cb3-25"><a href="#cb3-25" aria-hidden="true" tabindex="-1"></a>viewof backgroundColor <span class="op">=</span> <span class="fu">color</span>({</span>
<span id="cb3-26"><a href="#cb3-26" aria-hidden="true" tabindex="-1"></a>  <span class="co">// value: d3.color("rgb(253, 242, 208)").hex(),</span></span>
<span id="cb3-27"><a href="#cb3-27" aria-hidden="true" tabindex="-1"></a>  <span class="dt">value</span><span class="op">:</span> <span class="st">"#ffffff"</span><span class="op">,</span> <span class="co">// "#f7f7f7", //"#f2f0e6",</span></span>
<span id="cb3-28"><a href="#cb3-28" aria-hidden="true" tabindex="-1"></a>  <span class="dt">title</span><span class="op">:</span> <span class="st">"Background Color"</span></span>
<span id="cb3-29"><a href="#cb3-29" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-3" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb4" data-startfrom="34" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 33;"><span id="cb4-34"><a href="#cb4-34" aria-hidden="true" tabindex="-1"></a>depthSizeScale <span class="op">=</span> d3</span>
<span id="cb4-35"><a href="#cb4-35" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">scalePow</span>()</span>
<span id="cb4-36"><a href="#cb4-36" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">exponent</span>(<span class="fl">0.7</span>)</span>
<span id="cb4-37"><a href="#cb4-37" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> maxDepth])</span>
<span id="cb4-38"><a href="#cb4-38" aria-hidden="true" tabindex="-1"></a>  <span class="op">.</span><span class="fu">range</span>([<span class="dv">1</span><span class="op">,</span> <span class="fl">0.6</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-4" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb5" data-startfrom="43" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 42;"><span id="cb5-43"><a href="#cb5-43" aria-hidden="true" tabindex="-1"></a>strokeWidth <span class="op">=</span> <span class="dv">4</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-5" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb6" data-startfrom="48" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 47;"><span id="cb6-48"><a href="#cb6-48" aria-hidden="true" tabindex="-1"></a>imageSize <span class="op">=</span> <span class="dv">140</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-6" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb7" data-startfrom="53" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 52;"><span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>depthThickScale <span class="op">=</span> d3<span class="op">.</span><span class="fu">scaleLinear</span>()<span class="op">.</span><span class="fu">domain</span>([<span class="dv">0</span><span class="op">,</span> maxDepth <span class="op">-</span> <span class="dv">1</span>])<span class="op">.</span><span class="fu">range</span>([<span class="dv">10</span><span class="op">,</span> <span class="dv">5</span>])</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-7" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb8" data-startfrom="58" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 57;"><span id="cb8-58"><a href="#cb8-58" aria-hidden="true" tabindex="-1"></a>pageRenderer <span class="op">=</span> (data<span class="op">,</span> width<span class="op">,</span> height<span class="op">,</span> isTest <span class="op">=</span> <span class="kw">false</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb8-59"><a href="#cb8-59" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> svg <span class="op">=</span> DOM<span class="op">.</span><span class="fu">svg</span>(width<span class="op">,</span> height)<span class="op">;</span></span>
<span id="cb8-60"><a href="#cb8-60" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-61"><a href="#cb8-61" aria-hidden="true" tabindex="-1"></a>  d3<span class="op">.</span><span class="fu">select</span>(svg)</span>
<span id="cb8-62"><a href="#cb8-62" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">style</span>(<span class="st">'width'</span><span class="op">,</span> <span class="st">'100%'</span>)</span>
<span id="cb8-63"><a href="#cb8-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">style</span>(<span class="st">'height'</span><span class="op">,</span> <span class="st">'100%'</span>)<span class="op">;</span></span>
<span id="cb8-64"><a href="#cb8-64" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb8-65"><a href="#cb8-65" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> style <span class="op">=</span> isTest </span>
<span id="cb8-66"><a href="#cb8-66" aria-hidden="true" tabindex="-1"></a>    <span class="op">?</span> <span class="st">'height: ${height / 4}px;'</span></span>
<span id="cb8-67"><a href="#cb8-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">:</span> <span class="vs">`</span></span>
<span id="cb8-68"><a href="#cb8-68" aria-hidden="true" tabindex="-1"></a><span class="vs">      position: absolute;</span></span>
<span id="cb8-69"><a href="#cb8-69" aria-hidden="true" tabindex="-1"></a><span class="vs">      top: 0px;</span></span>
<span id="cb8-70"><a href="#cb8-70" aria-hidden="true" tabindex="-1"></a><span class="vs">      bottom: 0px;</span></span>
<span id="cb8-71"><a href="#cb8-71" aria-hidden="true" tabindex="-1"></a><span class="vs">      left: 0px;</span></span>
<span id="cb8-72"><a href="#cb8-72" aria-hidden="true" tabindex="-1"></a><span class="vs">      right: 0px;</span></span>
<span id="cb8-73"><a href="#cb8-73" aria-hidden="true" tabindex="-1"></a><span class="vs">    `</span><span class="op">;</span></span>
<span id="cb8-74"><a href="#cb8-74" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> container <span class="op">=</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb8-75"><a href="#cb8-75" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;div style="</span></span>
<span id="cb8-76"><a href="#cb8-76" aria-hidden="true" tabindex="-1"></a><span class="vs">      font-family: 'Montserrat', sans-serif;</span></span>
<span id="cb8-77"><a href="#cb8-77" aria-hidden="true" tabindex="-1"></a><span class="vs">      background-color: </span><span class="sc">${</span>backgroundColor<span class="sc">}</span><span class="vs">;</span></span>
<span id="cb8-78"><a href="#cb8-78" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span>style<span class="sc">}</span><span class="vs">;</span></span>
<span id="cb8-79"><a href="#cb8-79" aria-hidden="true" tabindex="-1"></a><span class="vs">    "&gt;</span></span>
<span id="cb8-80"><a href="#cb8-80" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;link rel='stylesheet' href='https://unpkg.com/wa-mediabox@1.0.1/dist/wa-mediabox.min.css'/&gt; </span></span>
<span id="cb8-81"><a href="#cb8-81" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;link href="https://fonts.googleapis.com/css?family=Montserrat" rel="stylesheet"&gt;</span></span>
<span id="cb8-82"><a href="#cb8-82" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;style&gt;</span></span>
<span id="cb8-83"><a href="#cb8-83" aria-hidden="true" tabindex="-1"></a><span class="vs">        .__wa-mediabox-open {</span></span>
<span id="cb8-84"><a href="#cb8-84" aria-hidden="true" tabindex="-1"></a><span class="vs">          visibility: hidden;</span></span>
<span id="cb8-85"><a href="#cb8-85" aria-hidden="true" tabindex="-1"></a><span class="vs">        }</span></span>
<span id="cb8-86"><a href="#cb8-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-87"><a href="#cb8-87" aria-hidden="true" tabindex="-1"></a><span class="vs">        .wa-mediabox-frame .wa-mediabox-close {</span></span>
<span id="cb8-88"><a href="#cb8-88" aria-hidden="true" tabindex="-1"></a><span class="vs">            right: 4px;</span></span>
<span id="cb8-89"><a href="#cb8-89" aria-hidden="true" tabindex="-1"></a><span class="vs">            top: 4px;</span></span>
<span id="cb8-90"><a href="#cb8-90" aria-hidden="true" tabindex="-1"></a><span class="vs">            width: 36px;</span></span>
<span id="cb8-91"><a href="#cb8-91" aria-hidden="true" tabindex="-1"></a><span class="vs">            height: 36px;</span></span>
<span id="cb8-92"><a href="#cb8-92" aria-hidden="true" tabindex="-1"></a><span class="vs">          transform: scale(</span><span class="sc">${</span>isMoble <span class="op">?</span> <span class="dv">3</span> <span class="op">:</span> <span class="fl">0.9</span><span class="sc">}</span><span class="vs">);</span></span>
<span id="cb8-93"><a href="#cb8-93" aria-hidden="true" tabindex="-1"></a><span class="vs">        } </span></span>
<span id="cb8-94"><a href="#cb8-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-95"><a href="#cb8-95" aria-hidden="true" tabindex="-1"></a><span class="vs">        .wa-mediabox-frame {</span></span>
<span id="cb8-96"><a href="#cb8-96" aria-hidden="true" tabindex="-1"></a><span class="vs">          top: 40%;</span></span>
<span id="cb8-97"><a href="#cb8-97" aria-hidden="true" tabindex="-1"></a><span class="vs">          transform: scale(0.904);</span></span>
<span id="cb8-98"><a href="#cb8-98" aria-hidden="true" tabindex="-1"></a><span class="vs">        }</span></span>
<span id="cb8-99"><a href="#cb8-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-100"><a href="#cb8-100" aria-hidden="true" tabindex="-1"></a><span class="vs">        .wa-mediabox-frame, .wa-mediabox-container {</span></span>
<span id="cb8-101"><a href="#cb8-101" aria-hidden="true" tabindex="-1"></a><span class="vs">          border-top-left-radius: 5px;</span></span>
<span id="cb8-102"><a href="#cb8-102" aria-hidden="true" tabindex="-1"></a><span class="vs">          border-top-right-radius: 5px;</span></span>
<span id="cb8-103"><a href="#cb8-103" aria-hidden="true" tabindex="-1"></a><span class="vs">        } </span></span>
<span id="cb8-104"><a href="#cb8-104" aria-hidden="true" tabindex="-1"></a><span class="vs">        .wa-mediabox-title {</span></span>
<span id="cb8-105"><a href="#cb8-105" aria-hidden="true" tabindex="-1"></a><span class="vs">          font-family: 'Montserrat', sans-serif;</span></span>
<span id="cb8-106"><a href="#cb8-106" aria-hidden="true" tabindex="-1"></a><span class="vs">          font-size: 16px;</span></span>
<span id="cb8-107"><a href="#cb8-107" aria-hidden="true" tabindex="-1"></a><span class="vs">          background: </span><span class="sc">${</span>backgroundColor<span class="sc">}</span><span class="vs">; </span></span>
<span id="cb8-108"><a href="#cb8-108" aria-hidden="true" tabindex="-1"></a><span class="vs">          color: #555;</span></span>
<span id="cb8-109"><a href="#cb8-109" aria-hidden="true" tabindex="-1"></a><span class="vs">          top: 100%;</span></span>
<span id="cb8-110"><a href="#cb8-110" aria-hidden="true" tabindex="-1"></a><span class="vs">          bottom: auto;</span></span>
<span id="cb8-111"><a href="#cb8-111" aria-hidden="true" tabindex="-1"></a><span class="vs">          border-bottom-left-radius: 5px;</span></span>
<span id="cb8-112"><a href="#cb8-112" aria-hidden="true" tabindex="-1"></a><span class="vs">          border-bottom-right-radius: 5px;</span></span>
<span id="cb8-113"><a href="#cb8-113" aria-hidden="true" tabindex="-1"></a><span class="vs">        }</span></span>
<span id="cb8-114"><a href="#cb8-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-115"><a href="#cb8-115" aria-hidden="true" tabindex="-1"></a><span class="vs">        .wa-mediabox-frame.loaded.has-title .wa-mediabox-title {</span></span>
<span id="cb8-116"><a href="#cb8-116" aria-hidden="true" tabindex="-1"></a><span class="vs">          padding: 4px 14px 20px 14px;</span></span>
<span id="cb8-117"><a href="#cb8-117" aria-hidden="true" tabindex="-1"></a><span class="vs">          user-select: all;</span></span>
<span id="cb8-118"><a href="#cb8-118" aria-hidden="true" tabindex="-1"></a><span class="vs">        }</span></span>
<span id="cb8-119"><a href="#cb8-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-120"><a href="#cb8-120" aria-hidden="true" tabindex="-1"></a><span class="vs">        .wa-mediabox-title a:link, .wa-mediabox-title a:visited {</span></span>
<span id="cb8-121"><a href="#cb8-121" aria-hidden="true" tabindex="-1"></a><span class="vs">          text-decoration: none;</span></span>
<span id="cb8-122"><a href="#cb8-122" aria-hidden="true" tabindex="-1"></a><span class="vs">          cursor: pointer;</span></span>
<span id="cb8-123"><a href="#cb8-123" aria-hidden="true" tabindex="-1"></a><span class="vs">          font-weight: bold;</span></span>
<span id="cb8-124"><a href="#cb8-124" aria-hidden="true" tabindex="-1"></a><span class="vs">          color: rgb(72, 128, 184);</span></span>
<span id="cb8-125"><a href="#cb8-125" aria-hidden="true" tabindex="-1"></a><span class="vs">        }</span></span>
<span id="cb8-126"><a href="#cb8-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-127"><a href="#cb8-127" aria-hidden="true" tabindex="-1"></a><span class="vs">      &lt;/style&gt;</span></span>
<span id="cb8-128"><a href="#cb8-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-129"><a href="#cb8-129" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span>svg<span class="sc">}</span></span>
<span id="cb8-130"><a href="#cb8-130" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb8-131"><a href="#cb8-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-132"><a href="#cb8-132" aria-hidden="true" tabindex="-1"></a>  <span class="fu">renderGraph</span>(data<span class="op">,</span> d3<span class="op">.</span><span class="fu">select</span>(svg)<span class="op">,</span> width<span class="op">,</span> height)<span class="op">;</span></span>
<span id="cb8-133"><a href="#cb8-133" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> container<span class="op">;</span></span>
<span id="cb8-134"><a href="#cb8-134" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-8" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb9" data-startfrom="139" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 138;"><span id="cb9-139"><a href="#cb9-139" aria-hidden="true" tabindex="-1"></a>renderGraph <span class="op">=</span> (data<span class="op">,</span> svg<span class="op">,</span> width<span class="op">,</span> height) <span class="kw">=&gt;</span> {</span>
<span id="cb9-140"><a href="#cb9-140" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> links <span class="op">=</span> data<span class="op">.</span><span class="at">links</span><span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">create</span>(d))<span class="op">;</span></span>
<span id="cb9-141"><a href="#cb9-141" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> nodes <span class="op">=</span> data<span class="op">.</span><span class="at">nodes</span><span class="op">.</span><span class="fu">map</span>(d <span class="kw">=&gt;</span> <span class="bu">Object</span><span class="op">.</span><span class="fu">create</span>(d))<span class="op">;</span></span>
<span id="cb9-142"><a href="#cb9-142" aria-hidden="true" tabindex="-1"></a> </span>
<span id="cb9-143"><a href="#cb9-143" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> defs <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">'defs'</span>)<span class="op">;</span></span>
<span id="cb9-144"><a href="#cb9-144" aria-hidden="true" tabindex="-1"></a>  defs</span>
<span id="cb9-145"><a href="#cb9-145" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'svg:clipPath'</span>)</span>
<span id="cb9-146"><a href="#cb9-146" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'id'</span><span class="op">,</span> <span class="st">'circle-clip'</span>)</span>
<span id="cb9-147"><a href="#cb9-147" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">'svg:circle'</span>)</span>
<span id="cb9-148"><a href="#cb9-148" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'cx'</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb9-149"><a href="#cb9-149" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'cy'</span><span class="op">,</span> <span class="dv">0</span>)</span>
<span id="cb9-150"><a href="#cb9-150" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'r'</span><span class="op">,</span> imageSize <span class="op">/</span> <span class="dv">2</span>)<span class="op">;</span></span>
<span id="cb9-151"><a href="#cb9-151" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-152"><a href="#cb9-152" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> linkForce <span class="op">=</span> d3</span>
<span id="cb9-153"><a href="#cb9-153" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">forceLink</span>(links)</span>
<span id="cb9-154"><a href="#cb9-154" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">id</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">title</span>)</span>
<span id="cb9-155"><a href="#cb9-155" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">distance</span>(d <span class="kw">=&gt;</span> <span class="fu">depthSizeScale</span>(d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">depth</span>) <span class="op">*</span> imageSize <span class="op">*</span> <span class="fl">1.1</span>)</span>
<span id="cb9-156"><a href="#cb9-156" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">strength</span>(<span class="fl">0.8</span>)<span class="op">;</span></span>
<span id="cb9-157"><a href="#cb9-157" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb9-158"><a href="#cb9-158" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> collideForce <span class="op">=</span> d3<span class="op">.</span><span class="fu">forceCollide</span>()</span>
<span id="cb9-159"><a href="#cb9-159" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">radius</span>(d <span class="kw">=&gt;</span> imageSize <span class="op">/</span> <span class="dv">2</span> <span class="op">*</span> <span class="fu">depthSizeScale</span>(d<span class="op">.</span><span class="at">depth</span>))<span class="op">;</span>      </span>
<span id="cb9-160"><a href="#cb9-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-161"><a href="#cb9-161" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> simulation <span class="op">=</span> d3<span class="op">.</span><span class="fu">forceSimulation</span>(nodes)</span>
<span id="cb9-162"><a href="#cb9-162" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">force</span>(<span class="st">"link"</span><span class="op">,</span> linkForce)</span>
<span id="cb9-163"><a href="#cb9-163" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">force</span>(<span class="st">"charge"</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">forceManyBody</span>()<span class="op">.</span><span class="fu">strength</span>(<span class="op">-</span><span class="dv">800</span>))</span>
<span id="cb9-164"><a href="#cb9-164" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">force</span>(<span class="st">"center"</span><span class="op">,</span> d3<span class="op">.</span><span class="fu">forceCenter</span>(width <span class="op">/</span> <span class="dv">2</span><span class="op">,</span> height <span class="op">/</span> <span class="dv">2</span>))</span>
<span id="cb9-165"><a href="#cb9-165" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">tick</span>(<span class="dv">80</span>)</span>
<span id="cb9-166"><a href="#cb9-166" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">force</span>(<span class="st">'collide'</span><span class="op">,</span> collideForce)</span>
<span id="cb9-167"><a href="#cb9-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-168"><a href="#cb9-168" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> link <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">"g"</span>)</span>
<span id="cb9-169"><a href="#cb9-169" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> linkColor)</span>
<span id="cb9-170"><a href="#cb9-170" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'fill'</span><span class="op">,</span> <span class="st">'none'</span>)</span>
<span id="cb9-171"><a href="#cb9-171" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">".link"</span>)</span>
<span id="cb9-172"><a href="#cb9-172" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(links)</span>
<span id="cb9-173"><a href="#cb9-173" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">"path"</span>)</span>
<span id="cb9-174"><a href="#cb9-174" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">classed</span>(<span class="st">'link'</span><span class="op">,</span> <span class="kw">true</span>)</span>
<span id="cb9-175"><a href="#cb9-175" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'stroke-linecap'</span><span class="op">,</span> <span class="st">'round'</span>)</span>
<span id="cb9-176"><a href="#cb9-176" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="fu">depthThickScale</span>(d<span class="op">.</span><span class="at">source</span><span class="op">.</span><span class="at">depth</span>))<span class="op">;</span></span>
<span id="cb9-177"><a href="#cb9-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-178"><a href="#cb9-178" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> node <span class="op">=</span> svg<span class="op">.</span><span class="fu">append</span>(<span class="st">'g'</span>)</span>
<span id="cb9-179"><a href="#cb9-179" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">selectAll</span>(<span class="st">'.node'</span>)</span>
<span id="cb9-180"><a href="#cb9-180" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">data</span>(nodes)</span>
<span id="cb9-181"><a href="#cb9-181" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">join</span>(<span class="st">'g'</span>)</span>
<span id="cb9-182"><a href="#cb9-182" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">'id'</span><span class="op">,</span> d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">title</span>)</span>
<span id="cb9-183"><a href="#cb9-183" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">classed</span>(<span class="st">'node'</span><span class="op">,</span> <span class="kw">true</span>)</span>
<span id="cb9-184"><a href="#cb9-184" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">style</span>(<span class="st">'cursor'</span><span class="op">,</span> <span class="st">'pointer'</span>)</span>
<span id="cb9-185"><a href="#cb9-185" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">call</span>(<span class="fu">drag</span>(simulation))</span>
<span id="cb9-186"><a href="#cb9-186" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">call</span>(renderNode)<span class="op">;</span></span>
<span id="cb9-187"><a href="#cb9-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-188"><a href="#cb9-188" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-189"><a href="#cb9-189" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> vertPath <span class="op">=</span> (x0<span class="op">,</span> y0<span class="op">,</span> x1<span class="op">,</span> y1) <span class="kw">=&gt;</span> <span class="vs">`M </span><span class="sc">${</span>x0<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>y0<span class="sc">}</span><span class="vs"> C </span><span class="sc">${</span>x1<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>y0<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>x0<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>y1<span class="sc">}</span><span class="vs">  </span><span class="sc">${</span>x1<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>y1<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb9-190"><a href="#cb9-190" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> horzPath <span class="op">=</span> (x0<span class="op">,</span> y0<span class="op">,</span> x1<span class="op">,</span> y1) <span class="kw">=&gt;</span> <span class="vs">`M </span><span class="sc">${</span>x0<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>y0<span class="sc">}</span><span class="vs"> C </span><span class="sc">${</span>x0<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>y1<span class="sc">}</span><span class="vs">  </span><span class="sc">${</span>x1<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>y0<span class="sc">}</span><span class="vs">  </span><span class="sc">${</span>x1<span class="sc">}</span><span class="vs"> </span><span class="sc">${</span>y1<span class="sc">}</span><span class="vs">`</span><span class="op">;</span></span>
<span id="cb9-191"><a href="#cb9-191" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb9-192"><a href="#cb9-192" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> pathPatternLut <span class="op">=</span> [horzPath<span class="op">,</span> vertPath<span class="op">,</span> horzPath<span class="op">,</span> vertPath]<span class="op">;</span></span>
<span id="cb9-193"><a href="#cb9-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-194"><a href="#cb9-194" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> linkPath <span class="op">=</span> ({ <span class="dt">source</span><span class="op">:</span> { <span class="dt">x</span><span class="op">:</span> x0<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> y0 }<span class="op">,</span> <span class="dt">target</span><span class="op">:</span> { <span class="dt">x</span><span class="op">:</span> x1<span class="op">,</span> <span class="dt">y</span><span class="op">:</span> y1 } }) <span class="kw">=&gt;</span> {</span>
<span id="cb9-195"><a href="#cb9-195" aria-hidden="true" tabindex="-1"></a>    <span class="kw">const</span> quadrant <span class="op">=</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">round</span>((<span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">*</span> <span class="fl">1.5</span> <span class="op">+</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">atan2</span>(y0 <span class="op">-</span> y1<span class="op">,</span> x0 <span class="op">-</span> x1)) </span>
<span id="cb9-196"><a href="#cb9-196" aria-hidden="true" tabindex="-1"></a>                                <span class="op">/</span> (<span class="bu">Math</span><span class="op">.</span><span class="cn">PI</span> <span class="op">/</span> <span class="dv">2</span>)) <span class="op">%</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb9-197"><a href="#cb9-197" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> pathPatternLut[quadrant](x0<span class="op">,</span> y0<span class="op">,</span> x1<span class="op">,</span> y1)<span class="op">;</span></span>
<span id="cb9-198"><a href="#cb9-198" aria-hidden="true" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb9-199"><a href="#cb9-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-200"><a href="#cb9-200" aria-hidden="true" tabindex="-1"></a>  simulation<span class="op">.</span><span class="fu">on</span>(<span class="st">"tick"</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb9-201"><a href="#cb9-201" aria-hidden="true" tabindex="-1"></a>    link<span class="op">.</span><span class="fu">attr</span>(<span class="st">'d'</span><span class="op">,</span> linkPath)<span class="op">;</span></span>
<span id="cb9-202"><a href="#cb9-202" aria-hidden="true" tabindex="-1"></a>    node<span class="op">.</span><span class="fu">attr</span>(<span class="st">'transform'</span><span class="op">,</span> d <span class="kw">=&gt;</span> <span class="vs">`translate(</span><span class="sc">${</span>d<span class="op">.</span><span class="at">x</span><span class="sc">}</span><span class="vs">, </span><span class="sc">${</span>d<span class="op">.</span><span class="at">y</span><span class="sc">}</span><span class="vs">) scale(</span><span class="sc">${</span><span class="fu">depthSizeScale</span>(d<span class="op">.</span><span class="at">depth</span>)<span class="sc">}</span><span class="vs">)`</span>)<span class="op">;</span></span>
<span id="cb9-203"><a href="#cb9-203" aria-hidden="true" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb9-204"><a href="#cb9-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb9-205"><a href="#cb9-205" aria-hidden="true" tabindex="-1"></a>  invalidation<span class="op">.</span><span class="fu">then</span>(() <span class="kw">=&gt;</span> simulation<span class="op">.</span><span class="fu">stop</span>())<span class="op">;</span></span>
<span id="cb9-206"><a href="#cb9-206" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-9" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb10" data-startfrom="211" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 210;"><span id="cb10-211"><a href="#cb10-211" aria-hidden="true" tabindex="-1"></a>renderNode <span class="op">=</span> (node) <span class="kw">=&gt;</span> {</span>
<span id="cb10-212"><a href="#cb10-212" aria-hidden="true" tabindex="-1"></a>  node</span>
<span id="cb10-213"><a href="#cb10-213" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"circle"</span>)</span>
<span id="cb10-214"><a href="#cb10-214" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"href"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">img</span>)</span>
<span id="cb10-215"><a href="#cb10-215" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"r"</span><span class="op">,</span> imageSize <span class="op">*</span> <span class="fl">0.5</span> <span class="op">+</span> strokeWidth <span class="op">/</span> <span class="dv">2</span>)</span>
<span id="cb10-216"><a href="#cb10-216" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"data-mediabox"</span><span class="op">,</span> <span class="st">"all"</span>) <span class="co">//(d) =&gt; d.group || "my-gallery-name")</span></span>
<span id="cb10-217"><a href="#cb10-217" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"data-title"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="st">"--"</span>)</span>
<span id="cb10-218"><a href="#cb10-218" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"fill"</span><span class="op">,</span> <span class="st">"rgba(255, 255, 255, 1)"</span>)</span>
<span id="cb10-219"><a href="#cb10-219" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke"</span><span class="op">,</span> linkColor)</span>
<span id="cb10-220"><a href="#cb10-220" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"stroke-width"</span><span class="op">,</span> strokeWidth)</span>
<span id="cb10-221"><a href="#cb10-221" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">each</span>(<span class="kw">function</span> <span class="fu">eachCall</span>(d) {</span>
<span id="cb10-222"><a href="#cb10-222" aria-hidden="true" tabindex="-1"></a>      WAMediaBox<span class="op">.</span><span class="fu">bind</span>(d3<span class="op">.</span><span class="fu">select</span>(<span class="kw">this</span>)<span class="op">.</span><span class="fu">node</span>()<span class="op">,</span> (container) <span class="kw">=&gt;</span> {</span>
<span id="cb10-223"><a href="#cb10-223" aria-hidden="true" tabindex="-1"></a>        container<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="st">""</span><span class="op">;</span></span>
<span id="cb10-224"><a href="#cb10-224" aria-hidden="true" tabindex="-1"></a>        container<span class="op">.</span><span class="fu">appendChild</span>(<span class="fu">renderBlurb</span>(d))<span class="op">;</span></span>
<span id="cb10-225"><a href="#cb10-225" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb10-226"><a href="#cb10-226" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb10-227"><a href="#cb10-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-228"><a href="#cb10-228" aria-hidden="true" tabindex="-1"></a>  node</span>
<span id="cb10-229"><a href="#cb10-229" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">filter</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">img</span>)</span>
<span id="cb10-230"><a href="#cb10-230" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">append</span>(<span class="st">"image"</span>)</span>
<span id="cb10-231"><a href="#cb10-231" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"clip-path"</span><span class="op">,</span> <span class="st">"url(#circle-clip)"</span>)</span>
<span id="cb10-232"><a href="#cb10-232" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(</span>
<span id="cb10-233"><a href="#cb10-233" aria-hidden="true" tabindex="-1"></a>      <span class="st">"xlink:href"</span><span class="op">,</span></span>
<span id="cb10-234"><a href="#cb10-234" aria-hidden="true" tabindex="-1"></a>      (d) <span class="kw">=&gt;</span> <span class="vs">`</span><span class="sc">${</span>d<span class="op">.</span><span class="at">img</span><span class="op">.</span><span class="fu">split</span>(<span class="st">"="</span>)[<span class="dv">0</span>]<span class="sc">}</span><span class="vs">=</span><span class="sc">${</span>d<span class="op">.</span><span class="at">aspect</span> <span class="op">&lt;</span> <span class="dv">1</span> <span class="op">?</span> <span class="st">"h"</span> <span class="op">:</span> <span class="st">"w"</span><span class="sc">}${</span>imageSize<span class="sc">}</span><span class="vs">-no`</span></span>
<span id="cb10-235"><a href="#cb10-235" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-236"><a href="#cb10-236" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">style</span>(<span class="st">"pointer-events"</span><span class="op">,</span> <span class="st">"none"</span>)</span>
<span id="cb10-237"><a href="#cb10-237" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"transform"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> <span class="vs">`scale(</span><span class="sc">${</span>d<span class="op">.</span><span class="at">scale</span> <span class="op">?</span> d<span class="op">.</span><span class="at">scale</span> <span class="op">:</span> <span class="dv">1</span><span class="sc">}</span><span class="vs">)`</span>)</span>
<span id="cb10-238"><a href="#cb10-238" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">style</span>(<span class="st">"opacity"</span><span class="op">,</span> <span class="fl">0.8</span>)</span>
<span id="cb10-239"><a href="#cb10-239" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"width"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> imageSize <span class="op">*</span> (d<span class="op">.</span><span class="at">aspect</span> <span class="op">&gt;</span> <span class="dv">1</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> <span class="dv">1</span> <span class="op">/</span> d<span class="op">.</span><span class="at">aspect</span>))</span>
<span id="cb10-240"><a href="#cb10-240" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"height"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span> imageSize <span class="op">*</span> (d<span class="op">.</span><span class="at">aspect</span> <span class="op">&lt;=</span> <span class="dv">1</span> <span class="op">?</span> <span class="dv">1</span> <span class="op">:</span> d<span class="op">.</span><span class="at">aspect</span>))</span>
<span id="cb10-241"><a href="#cb10-241" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"x"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span></span>
<span id="cb10-242"><a href="#cb10-242" aria-hidden="true" tabindex="-1"></a>      d<span class="op">.</span><span class="at">aspect</span> <span class="op">&gt;</span> <span class="dv">1</span></span>
<span id="cb10-243"><a href="#cb10-243" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> imageSize <span class="op">/</span> <span class="op">-</span><span class="dv">2</span></span>
<span id="cb10-244"><a href="#cb10-244" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="vs">`</span><span class="sc">${</span><span class="op">-</span>(d<span class="op">.</span><span class="at">width</span> <span class="op">/</span> <span class="dv">2</span>) <span class="op">/</span> (d<span class="op">.</span><span class="at">height</span> <span class="op">/</span> imageSize)<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb10-245"><a href="#cb10-245" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb10-246"><a href="#cb10-246" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">attr</span>(<span class="st">"y"</span><span class="op">,</span> (d) <span class="kw">=&gt;</span></span>
<span id="cb10-247"><a href="#cb10-247" aria-hidden="true" tabindex="-1"></a>      d<span class="op">.</span><span class="at">aspect</span> <span class="op">&lt;=</span> <span class="dv">1</span></span>
<span id="cb10-248"><a href="#cb10-248" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> imageSize <span class="op">/</span> <span class="op">-</span><span class="dv">2</span></span>
<span id="cb10-249"><a href="#cb10-249" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="vs">`</span><span class="sc">${</span><span class="op">-</span>(d<span class="op">.</span><span class="at">height</span> <span class="op">/</span> <span class="dv">2</span>) <span class="op">/</span> (d<span class="op">.</span><span class="at">width</span> <span class="op">/</span> imageSize)<span class="sc">}</span><span class="vs">`</span></span>
<span id="cb10-250"><a href="#cb10-250" aria-hidden="true" tabindex="-1"></a>    )<span class="op">;</span></span>
<span id="cb10-251"><a href="#cb10-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb10-252"><a href="#cb10-252" aria-hidden="true" tabindex="-1"></a>  node<span class="op">.</span><span class="fu">append</span>(<span class="st">"title"</span>)<span class="op">.</span><span class="fu">text</span>((d) <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">title</span>)<span class="op">;</span></span>
<span id="cb10-253"><a href="#cb10-253" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-10" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb11" data-startfrom="258" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 257;"><span id="cb11-258"><a href="#cb11-258" aria-hidden="true" tabindex="-1"></a>renderBlurb <span class="op">=</span> ({ title<span class="op">,</span> link<span class="op">,</span> description }) <span class="kw">=&gt;</span> {</span>
<span id="cb11-259"><a href="#cb11-259" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> linksModified <span class="op">=</span> (description <span class="op">||</span> <span class="st">""</span>)<span class="op">.</span><span class="fu">replace</span>(</span>
<span id="cb11-260"><a href="#cb11-260" aria-hidden="true" tabindex="-1"></a>    <span class="ss">/</span><span class="sc">\[(</span><span class="ss">.</span><span class="sc">*?)\]\((</span><span class="ss">.</span><span class="sc">*?)\)</span><span class="ss">/g</span><span class="op">,</span></span>
<span id="cb11-261"><a href="#cb11-261" aria-hidden="true" tabindex="-1"></a>    (match<span class="op">,</span> name<span class="op">,</span> url) <span class="kw">=&gt;</span> <span class="vs">`&lt;a href="</span><span class="sc">${</span>url<span class="sc">}</span><span class="vs">" target="_blank"&gt;</span><span class="sc">${</span>name<span class="sc">}</span><span class="vs">&lt;/a&gt;`</span></span>
<span id="cb11-262"><a href="#cb11-262" aria-hidden="true" tabindex="-1"></a>  )<span class="op">;</span></span>
<span id="cb11-263"><a href="#cb11-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-264"><a href="#cb11-264" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">html</span><span class="vs">`</span></span>
<span id="cb11-265"><a href="#cb11-265" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;div style="user-select: </span><span class="sc">${</span><span class="fu">hostedOnThumbtools</span>() <span class="op">?</span> <span class="st">"none"</span> <span class="op">:</span> <span class="st">"auto"</span><span class="sc">}</span><span class="vs">;"&gt;</span></span>
<span id="cb11-266"><a href="#cb11-266" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;!-- h2 style="</span><span class="sc">${</span>isMoble <span class="op">?</span> <span class="st">"font-size: 2.1em;"</span> <span class="op">:</span> <span class="st">""</span><span class="sc">}</span><span class="vs">"&gt;</span></span>
<span id="cb11-267"><a href="#cb11-267" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span>link <span class="op">?</span> <span class="vs">`&lt;a href="</span><span class="sc">${</span>link<span class="sc">}</span><span class="vs">" target="_blank"&gt;</span><span class="sc">${</span>title<span class="sc">}</span><span class="vs">&lt;/a&gt;`</span> <span class="op">:</span> title<span class="sc">}</span></span>
<span id="cb11-268"><a href="#cb11-268" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span></span>
<span id="cb11-269"><a href="#cb11-269" aria-hidden="true" tabindex="-1"></a>        link</span>
<span id="cb11-270"><a href="#cb11-270" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="vs">`&lt;a class="more-link" style="color: rgba(184, 67, 61, 1); font-size: 0.6em; padding-left: 8px;" href="</span><span class="sc">${</span>link<span class="sc">}</span><span class="vs">" target="_blank"&gt;See More&lt;/a&gt;`</span></span>
<span id="cb11-271"><a href="#cb11-271" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="st">""</span></span>
<span id="cb11-272"><a href="#cb11-272" aria-hidden="true" tabindex="-1"></a>      <span class="sc">}</span></span>
<span id="cb11-273"><a href="#cb11-273" aria-hidden="true" tabindex="-1"></a><span class="vs">     &lt;/h2 --&gt;</span></span>
<span id="cb11-274"><a href="#cb11-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-275"><a href="#cb11-275" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;h2 style="font-size: 3.9vmin"&gt;</span></span>
<span id="cb11-276"><a href="#cb11-276" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span>link <span class="op">?</span> <span class="vs">`&lt;a href="</span><span class="sc">${</span>link<span class="sc">}</span><span class="vs">" target="_blank"&gt;</span><span class="sc">${</span>title<span class="sc">}</span><span class="vs">&lt;/a&gt;`</span> <span class="op">:</span> title<span class="sc">}</span></span>
<span id="cb11-277"><a href="#cb11-277" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span></span>
<span id="cb11-278"><a href="#cb11-278" aria-hidden="true" tabindex="-1"></a>        link</span>
<span id="cb11-279"><a href="#cb11-279" aria-hidden="true" tabindex="-1"></a>          <span class="op">?</span> <span class="vs">`&lt;a class="more-link" style="color: rgba(184, 67, 61, 1); font-size: 0.6em; padding-left: 8px;" href="</span><span class="sc">${</span>link<span class="sc">}</span><span class="vs">" target="_blank"&gt;See More&lt;/a&gt;`</span></span>
<span id="cb11-280"><a href="#cb11-280" aria-hidden="true" tabindex="-1"></a>          <span class="op">:</span> <span class="st">""</span></span>
<span id="cb11-281"><a href="#cb11-281" aria-hidden="true" tabindex="-1"></a>      <span class="sc">}</span></span>
<span id="cb11-282"><a href="#cb11-282" aria-hidden="true" tabindex="-1"></a><span class="vs">     &lt;/h2&gt;</span></span>
<span id="cb11-283"><a href="#cb11-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-284"><a href="#cb11-284" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;!-- div style="</span><span class="sc">${</span></span>
<span id="cb11-285"><a href="#cb11-285" aria-hidden="true" tabindex="-1"></a>      isMoble</span>
<span id="cb11-286"><a href="#cb11-286" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> <span class="st">"font-size: 2.1em; line-height: 1em;"</span></span>
<span id="cb11-287"><a href="#cb11-287" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="st">"font-size: 0.6m; line-height: 1.3em;"</span></span>
<span id="cb11-288"><a href="#cb11-288" aria-hidden="true" tabindex="-1"></a>    <span class="sc">}</span><span class="vs">"</span></span>
<span id="cb11-289"><a href="#cb11-289" aria-hidden="true" tabindex="-1"></a><span class="vs">    &gt;</span></span>
<span id="cb11-290"><a href="#cb11-290" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span>linksModified<span class="sc">}</span></span>
<span id="cb11-291"><a href="#cb11-291" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/div --&gt;</span></span>
<span id="cb11-292"><a href="#cb11-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-293"><a href="#cb11-293" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;div style="</span><span class="sc">${</span></span>
<span id="cb11-294"><a href="#cb11-294" aria-hidden="true" tabindex="-1"></a>      isMoble</span>
<span id="cb11-295"><a href="#cb11-295" aria-hidden="true" tabindex="-1"></a>        <span class="op">?</span> <span class="st">"font-size: 3.4vmin; line-height: 3.6vmin;"</span></span>
<span id="cb11-296"><a href="#cb11-296" aria-hidden="true" tabindex="-1"></a>        <span class="op">:</span> <span class="st">"font-size: 2.1vmin; line-height: 2.3vmin;"</span></span>
<span id="cb11-297"><a href="#cb11-297" aria-hidden="true" tabindex="-1"></a>    <span class="sc">}</span><span class="vs">"</span></span>
<span id="cb11-298"><a href="#cb11-298" aria-hidden="true" tabindex="-1"></a><span class="vs">    &gt;</span></span>
<span id="cb11-299"><a href="#cb11-299" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span>linksModified<span class="sc">}</span></span>
<span id="cb11-300"><a href="#cb11-300" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/div&gt;</span></span>
<span id="cb11-301"><a href="#cb11-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-302"><a href="#cb11-302" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;!-- div style="font-size: 2.6vmin; line-height: 3vmin;"&gt;</span></span>
<span id="cb11-303"><a href="#cb11-303" aria-hidden="true" tabindex="-1"></a><span class="vs">      </span><span class="sc">${</span>linksModified<span class="sc">}</span></span>
<span id="cb11-304"><a href="#cb11-304" aria-hidden="true" tabindex="-1"></a><span class="vs">    &lt;/div --&gt;</span></span>
<span id="cb11-305"><a href="#cb11-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-306"><a href="#cb11-306" aria-hidden="true" tabindex="-1"></a><span class="vs">  &lt;/div&gt;`</span><span class="op">;</span></span>
<span id="cb11-307"><a href="#cb11-307" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-11" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb12" data-startfrom="312" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 311;"><span id="cb12-312"><a href="#cb12-312" aria-hidden="true" tabindex="-1"></a>drag <span class="op">=</span> simulation <span class="kw">=&gt;</span> {</span>
<span id="cb12-313"><a href="#cb12-313" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-314"><a href="#cb12-314" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">dragstarted</span>(d) {</span>
<span id="cb12-315"><a href="#cb12-315" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>d3<span class="op">.</span><span class="at">event</span><span class="op">.</span><span class="at">active</span>) simulation<span class="op">.</span><span class="fu">alphaTarget</span>(<span class="fl">0.3</span>)<span class="op">.</span><span class="fu">restart</span>()<span class="op">;</span></span>
<span id="cb12-316"><a href="#cb12-316" aria-hidden="true" tabindex="-1"></a>    d<span class="op">.</span><span class="at">fx</span> <span class="op">=</span> d<span class="op">.</span><span class="at">x</span><span class="op">;</span></span>
<span id="cb12-317"><a href="#cb12-317" aria-hidden="true" tabindex="-1"></a>    d<span class="op">.</span><span class="at">fy</span> <span class="op">=</span> d<span class="op">.</span><span class="at">y</span><span class="op">;</span></span>
<span id="cb12-318"><a href="#cb12-318" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-319"><a href="#cb12-319" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-320"><a href="#cb12-320" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">dragged</span>(d) {</span>
<span id="cb12-321"><a href="#cb12-321" aria-hidden="true" tabindex="-1"></a>    d<span class="op">.</span><span class="at">fx</span> <span class="op">=</span> d3<span class="op">.</span><span class="at">event</span><span class="op">.</span><span class="at">x</span><span class="op">;</span></span>
<span id="cb12-322"><a href="#cb12-322" aria-hidden="true" tabindex="-1"></a>    d<span class="op">.</span><span class="at">fy</span> <span class="op">=</span> d3<span class="op">.</span><span class="at">event</span><span class="op">.</span><span class="at">y</span><span class="op">;</span></span>
<span id="cb12-323"><a href="#cb12-323" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-324"><a href="#cb12-324" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-325"><a href="#cb12-325" aria-hidden="true" tabindex="-1"></a>  <span class="kw">function</span> <span class="fu">dragended</span>(d) {</span>
<span id="cb12-326"><a href="#cb12-326" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>d3<span class="op">.</span><span class="at">event</span><span class="op">.</span><span class="at">active</span>) simulation<span class="op">.</span><span class="fu">alphaTarget</span>(<span class="dv">0</span>)<span class="op">;</span></span>
<span id="cb12-327"><a href="#cb12-327" aria-hidden="true" tabindex="-1"></a>    d<span class="op">.</span><span class="at">fx</span> <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb12-328"><a href="#cb12-328" aria-hidden="true" tabindex="-1"></a>    d<span class="op">.</span><span class="at">fy</span> <span class="op">=</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb12-329"><a href="#cb12-329" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb12-330"><a href="#cb12-330" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb12-331"><a href="#cb12-331" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> d3<span class="op">.</span><span class="fu">drag</span>()</span>
<span id="cb12-332"><a href="#cb12-332" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">on</span>(<span class="st">"start"</span><span class="op">,</span> dragstarted)</span>
<span id="cb12-333"><a href="#cb12-333" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">on</span>(<span class="st">"drag"</span><span class="op">,</span> dragged)</span>
<span id="cb12-334"><a href="#cb12-334" aria-hidden="true" tabindex="-1"></a>      <span class="op">.</span><span class="fu">on</span>(<span class="st">"end"</span><span class="op">,</span> dragended)<span class="op">;</span></span>
<span id="cb12-335"><a href="#cb12-335" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-12" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb13" data-startfrom="340" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 339;"><span id="cb13-340"><a href="#cb13-340" aria-hidden="true" tabindex="-1"></a>isMoble <span class="op">=</span> {</span>
<span id="cb13-341"><a href="#cb13-341" aria-hidden="true" tabindex="-1"></a><span class="co">// device detection</span></span>
<span id="cb13-342"><a href="#cb13-342" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span>(<span class="ss">/</span><span class="sc">(</span><span class="ss">android</span><span class="sc">|</span><span class="ss">bb</span><span class="sc">\d+|</span><span class="ss">meego</span><span class="sc">)</span><span class="ss">.</span><span class="sc">+</span><span class="ss">mobile</span><span class="sc">|</span><span class="ss">avantgo</span><span class="sc">|</span><span class="ss">bada</span><span class="sc">\/|</span><span class="ss">blackberry</span><span class="sc">|</span><span class="ss">blazer</span><span class="sc">|</span><span class="ss">compal</span><span class="sc">|</span><span class="ss">elaine</span><span class="sc">|</span><span class="ss">fennec</span><span class="sc">|</span><span class="ss">hiptop</span><span class="sc">|</span><span class="ss">iemobile</span><span class="sc">|</span><span class="ss">ip</span><span class="sc">(</span><span class="ss">hone</span><span class="sc">|</span><span class="ss">od</span><span class="sc">)|</span><span class="ss">ipad</span><span class="sc">|</span><span class="ss">iris</span><span class="sc">|</span><span class="ss">kindle</span><span class="sc">|</span><span class="ss">Android</span><span class="sc">|</span><span class="ss">Silk</span><span class="sc">|</span><span class="ss">lge </span><span class="sc">|</span><span class="ss">maemo</span><span class="sc">|</span><span class="ss">midp</span><span class="sc">|</span><span class="ss">mmp</span><span class="sc">|</span><span class="ss">netfront</span><span class="sc">|</span><span class="ss">opera m</span><span class="sc">(</span><span class="ss">ob</span><span class="sc">|</span><span class="ss">in</span><span class="sc">)</span><span class="ss">i</span><span class="sc">|</span><span class="ss">palm</span><span class="sc">(</span><span class="ss"> os</span><span class="sc">)?|</span><span class="ss">phone</span><span class="sc">|</span><span class="ss">p</span><span class="sc">(</span><span class="ss">ixi</span><span class="sc">|</span><span class="ss">re</span><span class="sc">)\/|</span><span class="ss">plucker</span><span class="sc">|</span><span class="ss">pocket</span><span class="sc">|</span><span class="ss">psp</span><span class="sc">|</span><span class="ss">series</span><span class="sc">(</span><span class="ss">4</span><span class="sc">|</span><span class="ss">6</span><span class="sc">)</span><span class="ss">0</span><span class="sc">|</span><span class="ss">symbian</span><span class="sc">|</span><span class="ss">treo</span><span class="sc">|</span><span class="ss">up</span><span class="sc">\.(</span><span class="ss">browser</span><span class="sc">|</span><span class="ss">link</span><span class="sc">)|</span><span class="ss">vodafone</span><span class="sc">|</span><span class="ss">wap</span><span class="sc">|</span><span class="ss">windows </span><span class="sc">(</span><span class="ss">ce</span><span class="sc">|</span><span class="ss">phone</span><span class="sc">)|</span><span class="ss">xda</span><span class="sc">|</span><span class="ss">xiino/i</span><span class="op">.</span><span class="fu">test</span>(<span class="bu">navigator</span><span class="op">.</span><span class="at">userAgent</span>) </span>
<span id="cb13-343"><a href="#cb13-343" aria-hidden="true" tabindex="-1"></a>    <span class="op">||</span> <span class="ss">/1207</span><span class="sc">|</span><span class="ss">6310</span><span class="sc">|</span><span class="ss">6590</span><span class="sc">|</span><span class="ss">3gso</span><span class="sc">|</span><span class="ss">4thp</span><span class="sc">|</span><span class="ss">50</span><span class="sc">[1-6]</span><span class="ss">i</span><span class="sc">|</span><span class="ss">770s</span><span class="sc">|</span><span class="ss">802s</span><span class="sc">|</span><span class="ss">a wa</span><span class="sc">|</span><span class="ss">abac</span><span class="sc">|</span><span class="ss">ac</span><span class="sc">(</span><span class="ss">er</span><span class="sc">|</span><span class="ss">oo</span><span class="sc">|</span><span class="ss">s</span><span class="sc">\-)|</span><span class="ss">ai</span><span class="sc">(</span><span class="ss">ko</span><span class="sc">|</span><span class="ss">rn</span><span class="sc">)|</span><span class="ss">al</span><span class="sc">(</span><span class="ss">av</span><span class="sc">|</span><span class="ss">ca</span><span class="sc">|</span><span class="ss">co</span><span class="sc">)|</span><span class="ss">amoi</span><span class="sc">|</span><span class="ss">an</span><span class="sc">(</span><span class="ss">ex</span><span class="sc">|</span><span class="ss">ny</span><span class="sc">|</span><span class="ss">yw</span><span class="sc">)|</span><span class="ss">aptu</span><span class="sc">|</span><span class="ss">ar</span><span class="sc">(</span><span class="ss">ch</span><span class="sc">|</span><span class="ss">go</span><span class="sc">)|</span><span class="ss">as</span><span class="sc">(</span><span class="ss">te</span><span class="sc">|</span><span class="ss">us</span><span class="sc">)|</span><span class="ss">attw</span><span class="sc">|</span><span class="ss">au</span><span class="sc">(</span><span class="ss">di</span><span class="sc">|\-</span><span class="ss">m</span><span class="sc">|</span><span class="ss">r </span><span class="sc">|</span><span class="ss">s </span><span class="sc">)|</span><span class="ss">avan</span><span class="sc">|</span><span class="ss">be</span><span class="sc">(</span><span class="ss">ck</span><span class="sc">|</span><span class="ss">ll</span><span class="sc">|</span><span class="ss">nq</span><span class="sc">)|</span><span class="ss">bi</span><span class="sc">(</span><span class="ss">lb</span><span class="sc">|</span><span class="ss">rd</span><span class="sc">)|</span><span class="ss">bl</span><span class="sc">(</span><span class="ss">ac</span><span class="sc">|</span><span class="ss">az</span><span class="sc">)|</span><span class="ss">br</span><span class="sc">(</span><span class="ss">e</span><span class="sc">|</span><span class="ss">v</span><span class="sc">)</span><span class="ss">w</span><span class="sc">|</span><span class="ss">bumb</span><span class="sc">|</span><span class="ss">bw</span><span class="sc">\-(</span><span class="ss">n</span><span class="sc">|</span><span class="ss">u</span><span class="sc">)|</span><span class="ss">c55</span><span class="sc">\/|</span><span class="ss">capi</span><span class="sc">|</span><span class="ss">ccwa</span><span class="sc">|</span><span class="ss">cdm</span><span class="sc">\-|</span><span class="ss">cell</span><span class="sc">|</span><span class="ss">chtm</span><span class="sc">|</span><span class="ss">cldc</span><span class="sc">|</span><span class="ss">cmd</span><span class="sc">\-|</span><span class="ss">co</span><span class="sc">(</span><span class="ss">mp</span><span class="sc">|</span><span class="ss">nd</span><span class="sc">)|</span><span class="ss">craw</span><span class="sc">|</span><span class="ss">da</span><span class="sc">(</span><span class="ss">it</span><span class="sc">|</span><span class="ss">ll</span><span class="sc">|</span><span class="ss">ng</span><span class="sc">)|</span><span class="ss">dbte</span><span class="sc">|</span><span class="ss">dc</span><span class="sc">\-</span><span class="ss">s</span><span class="sc">|</span><span class="ss">devi</span><span class="sc">|</span><span class="ss">dica</span><span class="sc">|</span><span class="ss">dmob</span><span class="sc">|</span><span class="ss">do</span><span class="sc">(</span><span class="ss">c</span><span class="sc">|</span><span class="ss">p</span><span class="sc">)</span><span class="ss">o</span><span class="sc">|</span><span class="ss">ds</span><span class="sc">(</span><span class="ss">12</span><span class="sc">|\-</span><span class="ss">d</span><span class="sc">)|</span><span class="ss">el</span><span class="sc">(</span><span class="ss">49</span><span class="sc">|</span><span class="ss">ai</span><span class="sc">)|</span><span class="ss">em</span><span class="sc">(</span><span class="ss">l2</span><span class="sc">|</span><span class="ss">ul</span><span class="sc">)|</span><span class="ss">er</span><span class="sc">(</span><span class="ss">ic</span><span class="sc">|</span><span class="ss">k0</span><span class="sc">)|</span><span class="ss">esl8</span><span class="sc">|</span><span class="ss">ez</span><span class="sc">([4-7]</span><span class="ss">0</span><span class="sc">|</span><span class="ss">os</span><span class="sc">|</span><span class="ss">wa</span><span class="sc">|</span><span class="ss">ze</span><span class="sc">)|</span><span class="ss">fetc</span><span class="sc">|</span><span class="ss">fly</span><span class="sc">(\-|</span><span class="ss">_</span><span class="sc">)|</span><span class="ss">g1 u</span><span class="sc">|</span><span class="ss">g560</span><span class="sc">|</span><span class="ss">gene</span><span class="sc">|</span><span class="ss">gf</span><span class="sc">\-</span><span class="ss">5</span><span class="sc">|</span><span class="ss">g</span><span class="sc">\-</span><span class="ss">mo</span><span class="sc">|</span><span class="ss">go</span><span class="sc">(\.</span><span class="ss">w</span><span class="sc">|</span><span class="ss">od</span><span class="sc">)|</span><span class="ss">gr</span><span class="sc">(</span><span class="ss">ad</span><span class="sc">|</span><span class="ss">un</span><span class="sc">)|</span><span class="ss">haie</span><span class="sc">|</span><span class="ss">hcit</span><span class="sc">|</span><span class="ss">hd</span><span class="sc">\-(</span><span class="ss">m</span><span class="sc">|</span><span class="ss">p</span><span class="sc">|</span><span class="ss">t</span><span class="sc">)|</span><span class="ss">hei</span><span class="sc">\-|</span><span class="ss">hi</span><span class="sc">(</span><span class="ss">pt</span><span class="sc">|</span><span class="ss">ta</span><span class="sc">)|</span><span class="ss">hp</span><span class="sc">(</span><span class="ss"> i</span><span class="sc">|</span><span class="ss">ip</span><span class="sc">)|</span><span class="ss">hs</span><span class="sc">\-</span><span class="ss">c</span><span class="sc">|</span><span class="ss">ht</span><span class="sc">(</span><span class="ss">c</span><span class="sc">(\-|</span><span class="ss"> </span><span class="sc">|</span><span class="ss">_</span><span class="sc">|</span><span class="ss">a</span><span class="sc">|</span><span class="ss">g</span><span class="sc">|</span><span class="ss">p</span><span class="sc">|</span><span class="ss">s</span><span class="sc">|</span><span class="ss">t</span><span class="sc">)|</span><span class="ss">tp</span><span class="sc">)|</span><span class="ss">hu</span><span class="sc">(</span><span class="ss">aw</span><span class="sc">|</span><span class="ss">tc</span><span class="sc">)|</span><span class="ss">i</span><span class="sc">\-(</span><span class="ss">20</span><span class="sc">|</span><span class="ss">go</span><span class="sc">|</span><span class="ss">ma</span><span class="sc">)|</span><span class="ss">i230</span><span class="sc">|</span><span class="ss">iac</span><span class="sc">(</span><span class="ss"> </span><span class="sc">|\-|\/)|</span><span class="ss">ibro</span><span class="sc">|</span><span class="ss">idea</span><span class="sc">|</span><span class="ss">ig01</span><span class="sc">|</span><span class="ss">ikom</span><span class="sc">|</span><span class="ss">im1k</span><span class="sc">|</span><span class="ss">inno</span><span class="sc">|</span><span class="ss">ipaq</span><span class="sc">|</span><span class="ss">iris</span><span class="sc">|</span><span class="ss">ja</span><span class="sc">(</span><span class="ss">t</span><span class="sc">|</span><span class="ss">v</span><span class="sc">)</span><span class="ss">a</span><span class="sc">|</span><span class="ss">jbro</span><span class="sc">|</span><span class="ss">jemu</span><span class="sc">|</span><span class="ss">jigs</span><span class="sc">|</span><span class="ss">kddi</span><span class="sc">|</span><span class="ss">keji</span><span class="sc">|</span><span class="ss">kgt</span><span class="sc">(</span><span class="ss"> </span><span class="sc">|\/)|</span><span class="ss">klon</span><span class="sc">|</span><span class="ss">kpt </span><span class="sc">|</span><span class="ss">kwc</span><span class="sc">\-|</span><span class="ss">kyo</span><span class="sc">(</span><span class="ss">c</span><span class="sc">|</span><span class="ss">k</span><span class="sc">)|</span><span class="ss">le</span><span class="sc">(</span><span class="ss">no</span><span class="sc">|</span><span class="ss">xi</span><span class="sc">)|</span><span class="ss">lg</span><span class="sc">(</span><span class="ss"> g</span><span class="sc">|\/(</span><span class="ss">k</span><span class="sc">|</span><span class="ss">l</span><span class="sc">|</span><span class="ss">u</span><span class="sc">)|</span><span class="ss">50</span><span class="sc">|</span><span class="ss">54</span><span class="sc">|\-[a-w])|</span><span class="ss">libw</span><span class="sc">|</span><span class="ss">lynx</span><span class="sc">|</span><span class="ss">m1</span><span class="sc">\-</span><span class="ss">w</span><span class="sc">|</span><span class="ss">m3ga</span><span class="sc">|</span><span class="ss">m50</span><span class="sc">\/|</span><span class="ss">ma</span><span class="sc">(</span><span class="ss">te</span><span class="sc">|</span><span class="ss">ui</span><span class="sc">|</span><span class="ss">xo</span><span class="sc">)|</span><span class="ss">mc</span><span class="sc">(</span><span class="ss">01</span><span class="sc">|</span><span class="ss">21</span><span class="sc">|</span><span class="ss">ca</span><span class="sc">)|</span><span class="ss">m</span><span class="sc">\-</span><span class="ss">cr</span><span class="sc">|</span><span class="ss">me</span><span class="sc">(</span><span class="ss">rc</span><span class="sc">|</span><span class="ss">ri</span><span class="sc">)|</span><span class="ss">mi</span><span class="sc">(</span><span class="ss">o8</span><span class="sc">|</span><span class="ss">oa</span><span class="sc">|</span><span class="ss">ts</span><span class="sc">)|</span><span class="ss">mmef</span><span class="sc">|</span><span class="ss">mo</span><span class="sc">(</span><span class="ss">01</span><span class="sc">|</span><span class="ss">02</span><span class="sc">|</span><span class="ss">bi</span><span class="sc">|</span><span class="ss">de</span><span class="sc">|</span><span class="ss">do</span><span class="sc">|</span><span class="ss">t</span><span class="sc">(\-|</span><span class="ss"> </span><span class="sc">|</span><span class="ss">o</span><span class="sc">|</span><span class="ss">v</span><span class="sc">)|</span><span class="ss">zz</span><span class="sc">)|</span><span class="ss">mt</span><span class="sc">(</span><span class="ss">50</span><span class="sc">|</span><span class="ss">p1</span><span class="sc">|</span><span class="ss">v </span><span class="sc">)|</span><span class="ss">mwbp</span><span class="sc">|</span><span class="ss">mywa</span><span class="sc">|</span><span class="ss">n10</span><span class="sc">[0-2]|</span><span class="ss">n20</span><span class="sc">[2-3]|</span><span class="ss">n30</span><span class="sc">(</span><span class="ss">0</span><span class="sc">|</span><span class="ss">2</span><span class="sc">)|</span><span class="ss">n50</span><span class="sc">(</span><span class="ss">0</span><span class="sc">|</span><span class="ss">2</span><span class="sc">|</span><span class="ss">5</span><span class="sc">)|</span><span class="ss">n7</span><span class="sc">(</span><span class="ss">0</span><span class="sc">(</span><span class="ss">0</span><span class="sc">|</span><span class="ss">1</span><span class="sc">)|</span><span class="ss">10</span><span class="sc">)|</span><span class="ss">ne</span><span class="sc">((</span><span class="ss">c</span><span class="sc">|</span><span class="ss">m</span><span class="sc">)\-|</span><span class="ss">on</span><span class="sc">|</span><span class="ss">tf</span><span class="sc">|</span><span class="ss">wf</span><span class="sc">|</span><span class="ss">wg</span><span class="sc">|</span><span class="ss">wt</span><span class="sc">)|</span><span class="ss">nok</span><span class="sc">(</span><span class="ss">6</span><span class="sc">|</span><span class="ss">i</span><span class="sc">)|</span><span class="ss">nzph</span><span class="sc">|</span><span class="ss">o2im</span><span class="sc">|</span><span class="ss">op</span><span class="sc">(</span><span class="ss">ti</span><span class="sc">|</span><span class="ss">wv</span><span class="sc">)|</span><span class="ss">oran</span><span class="sc">|</span><span class="ss">owg1</span><span class="sc">|</span><span class="ss">p800</span><span class="sc">|</span><span class="ss">pan</span><span class="sc">(</span><span class="ss">a</span><span class="sc">|</span><span class="ss">d</span><span class="sc">|</span><span class="ss">t</span><span class="sc">)|</span><span class="ss">pdxg</span><span class="sc">|</span><span class="ss">pg</span><span class="sc">(</span><span class="ss">13</span><span class="sc">|\-([1-8]|</span><span class="ss">c</span><span class="sc">))|</span><span class="ss">phil</span><span class="sc">|</span><span class="ss">pire</span><span class="sc">|</span><span class="ss">pl</span><span class="sc">(</span><span class="ss">ay</span><span class="sc">|</span><span class="ss">uc</span><span class="sc">)|</span><span class="ss">pn</span><span class="sc">\-</span><span class="ss">2</span><span class="sc">|</span><span class="ss">po</span><span class="sc">(</span><span class="ss">ck</span><span class="sc">|</span><span class="ss">rt</span><span class="sc">|</span><span class="ss">se</span><span class="sc">)|</span><span class="ss">prox</span><span class="sc">|</span><span class="ss">psio</span><span class="sc">|</span><span class="ss">pt</span><span class="sc">\-</span><span class="ss">g</span><span class="sc">|</span><span class="ss">qa</span><span class="sc">\-</span><span class="ss">a</span><span class="sc">|</span><span class="ss">qc</span><span class="sc">(</span><span class="ss">07</span><span class="sc">|</span><span class="ss">12</span><span class="sc">|</span><span class="ss">21</span><span class="sc">|</span><span class="ss">32</span><span class="sc">|</span><span class="ss">60</span><span class="sc">|\-[2-7]|</span><span class="ss">i</span><span class="sc">\-)|</span><span class="ss">qtek</span><span class="sc">|</span><span class="ss">r380</span><span class="sc">|</span><span class="ss">r600</span><span class="sc">|</span><span class="ss">raks</span><span class="sc">|</span><span class="ss">rim9</span><span class="sc">|</span><span class="ss">ro</span><span class="sc">(</span><span class="ss">ve</span><span class="sc">|</span><span class="ss">zo</span><span class="sc">)|</span><span class="ss">s55</span><span class="sc">\/|</span><span class="ss">sa</span><span class="sc">(</span><span class="ss">ge</span><span class="sc">|</span><span class="ss">ma</span><span class="sc">|</span><span class="ss">mm</span><span class="sc">|</span><span class="ss">ms</span><span class="sc">|</span><span class="ss">ny</span><span class="sc">|</span><span class="ss">va</span><span class="sc">)|</span><span class="ss">sc</span><span class="sc">(</span><span class="ss">01</span><span class="sc">|</span><span class="ss">h</span><span class="sc">\-|</span><span class="ss">oo</span><span class="sc">|</span><span class="ss">p</span><span class="sc">\-)|</span><span class="ss">sdk</span><span class="sc">\/|</span><span class="ss">se</span><span class="sc">(</span><span class="ss">c</span><span class="sc">(\-|</span><span class="ss">0</span><span class="sc">|</span><span class="ss">1</span><span class="sc">)|</span><span class="ss">47</span><span class="sc">|</span><span class="ss">mc</span><span class="sc">|</span><span class="ss">nd</span><span class="sc">|</span><span class="ss">ri</span><span class="sc">)|</span><span class="ss">sgh</span><span class="sc">\-|</span><span class="ss">shar</span><span class="sc">|</span><span class="ss">sie</span><span class="sc">(\-|</span><span class="ss">m</span><span class="sc">)|</span><span class="ss">sk</span><span class="sc">\-</span><span class="ss">0</span><span class="sc">|</span><span class="ss">sl</span><span class="sc">(</span><span class="ss">45</span><span class="sc">|</span><span class="ss">id</span><span class="sc">)|</span><span class="ss">sm</span><span class="sc">(</span><span class="ss">al</span><span class="sc">|</span><span class="ss">ar</span><span class="sc">|</span><span class="ss">b3</span><span class="sc">|</span><span class="ss">it</span><span class="sc">|</span><span class="ss">t5</span><span class="sc">)|</span><span class="ss">so</span><span class="sc">(</span><span class="ss">ft</span><span class="sc">|</span><span class="ss">ny</span><span class="sc">)|</span><span class="ss">sp</span><span class="sc">(</span><span class="ss">01</span><span class="sc">|</span><span class="ss">h</span><span class="sc">\-|</span><span class="ss">v</span><span class="sc">\-|</span><span class="ss">v </span><span class="sc">)|</span><span class="ss">sy</span><span class="sc">(</span><span class="ss">01</span><span class="sc">|</span><span class="ss">mb</span><span class="sc">)|</span><span class="ss">t2</span><span class="sc">(</span><span class="ss">18</span><span class="sc">|</span><span class="ss">50</span><span class="sc">)|</span><span class="ss">t6</span><span class="sc">(</span><span class="ss">00</span><span class="sc">|</span><span class="ss">10</span><span class="sc">|</span><span class="ss">18</span><span class="sc">)|</span><span class="ss">ta</span><span class="sc">(</span><span class="ss">gt</span><span class="sc">|</span><span class="ss">lk</span><span class="sc">)|</span><span class="ss">tcl</span><span class="sc">\-|</span><span class="ss">tdg</span><span class="sc">\-|</span><span class="ss">tel</span><span class="sc">(</span><span class="ss">i</span><span class="sc">|</span><span class="ss">m</span><span class="sc">)|</span><span class="ss">tim</span><span class="sc">\-|</span><span class="ss">t</span><span class="sc">\-</span><span class="ss">mo</span><span class="sc">|</span><span class="ss">to</span><span class="sc">(</span><span class="ss">pl</span><span class="sc">|</span><span class="ss">sh</span><span class="sc">)|</span><span class="ss">ts</span><span class="sc">(</span><span class="ss">70</span><span class="sc">|</span><span class="ss">m</span><span class="sc">\-|</span><span class="ss">m3</span><span class="sc">|</span><span class="ss">m5</span><span class="sc">)|</span><span class="ss">tx</span><span class="sc">\-</span><span class="ss">9</span><span class="sc">|</span><span class="ss">up</span><span class="sc">(\.</span><span class="ss">b</span><span class="sc">|</span><span class="ss">g1</span><span class="sc">|</span><span class="ss">si</span><span class="sc">)|</span><span class="ss">utst</span><span class="sc">|</span><span class="ss">v400</span><span class="sc">|</span><span class="ss">v750</span><span class="sc">|</span><span class="ss">veri</span><span class="sc">|</span><span class="ss">vi</span><span class="sc">(</span><span class="ss">rg</span><span class="sc">|</span><span class="ss">te</span><span class="sc">)|</span><span class="ss">vk</span><span class="sc">(</span><span class="ss">40</span><span class="sc">|</span><span class="ss">5</span><span class="sc">[0-3]|\-</span><span class="ss">v</span><span class="sc">)|</span><span class="ss">vm40</span><span class="sc">|</span><span class="ss">voda</span><span class="sc">|</span><span class="ss">vulc</span><span class="sc">|</span><span class="ss">vx</span><span class="sc">(</span><span class="ss">52</span><span class="sc">|</span><span class="ss">53</span><span class="sc">|</span><span class="ss">60</span><span class="sc">|</span><span class="ss">61</span><span class="sc">|</span><span class="ss">70</span><span class="sc">|</span><span class="ss">80</span><span class="sc">|</span><span class="ss">81</span><span class="sc">|</span><span class="ss">83</span><span class="sc">|</span><span class="ss">85</span><span class="sc">|</span><span class="ss">98</span><span class="sc">)|</span><span class="ss">w3c</span><span class="sc">(\-|</span><span class="ss"> </span><span class="sc">)|</span><span class="ss">webc</span><span class="sc">|</span><span class="ss">whit</span><span class="sc">|</span><span class="ss">wi</span><span class="sc">(</span><span class="ss">g </span><span class="sc">|</span><span class="ss">nc</span><span class="sc">|</span><span class="ss">nw</span><span class="sc">)|</span><span class="ss">wmlb</span><span class="sc">|</span><span class="ss">wonu</span><span class="sc">|</span><span class="ss">x700</span><span class="sc">|</span><span class="ss">yas</span><span class="sc">\-|</span><span class="ss">your</span><span class="sc">|</span><span class="ss">zeto</span><span class="sc">|</span><span class="ss">zte</span><span class="sc">\-</span><span class="ss">/i</span><span class="op">.</span><span class="fu">test</span>(<span class="bu">navigator</span><span class="op">.</span><span class="at">userAgent</span><span class="op">.</span><span class="fu">substr</span>(<span class="dv">0</span><span class="op">,</span><span class="dv">4</span>))) { </span>
<span id="cb13-344"><a href="#cb13-344" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb13-345"><a href="#cb13-345" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb13-346"><a href="#cb13-346" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb13-347"><a href="#cb13-347" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-13" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb14" data-startfrom="352" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 351;"><span id="cb14-352"><a href="#cb14-352" aria-hidden="true" tabindex="-1"></a>height <span class="op">=</span> {</span>
<span id="cb14-353"><a href="#cb14-353" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> body <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="at">body</span><span class="op">;</span></span>
<span id="cb14-354"><a href="#cb14-354" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> doc <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="at">documentElement</span><span class="op">;</span></span>
<span id="cb14-355"><a href="#cb14-355" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="bu">Math</span><span class="op">.</span><span class="fu">max</span>(</span>
<span id="cb14-356"><a href="#cb14-356" aria-hidden="true" tabindex="-1"></a>      body<span class="op">.</span><span class="at">scrollHeight</span><span class="op">,</span> body<span class="op">.</span><span class="at">offsetHeight</span><span class="op">,</span></span>
<span id="cb14-357"><a href="#cb14-357" aria-hidden="true" tabindex="-1"></a>      doc<span class="op">.</span><span class="at">clientHeight</span><span class="op">,</span> doc<span class="op">.</span><span class="at">scrollHeight</span><span class="op">,</span> doc<span class="op">.</span><span class="at">offsetHeight</span>)<span class="op">;</span></span>
<span id="cb14-358"><a href="#cb14-358" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-14" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb15" data-startfrom="363" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 362;"><span id="cb15-363"><a href="#cb15-363" aria-hidden="true" tabindex="-1"></a>maxDepth <span class="op">=</span> {</span>
<span id="cb15-364"><a href="#cb15-364" aria-hidden="true" tabindex="-1"></a>    <span class="kw">function</span> <span class="fu">findDepth</span>(node<span class="op">,</span> depth <span class="op">=</span> <span class="dv">0</span>) {</span>
<span id="cb15-365"><a href="#cb15-365" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>node<span class="op">.</span><span class="at">children</span> <span class="op">||</span> node<span class="op">.</span><span class="at">children</span><span class="op">.</span><span class="at">length</span> <span class="op">===</span> <span class="dv">0</span>) {</span>
<span id="cb15-366"><a href="#cb15-366" aria-hidden="true" tabindex="-1"></a>      <span class="cf">return</span> depth<span class="op">;</span></span>
<span id="cb15-367"><a href="#cb15-367" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb15-368"><a href="#cb15-368" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb15-369"><a href="#cb15-369" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> d3<span class="op">.</span><span class="fu">max</span>(node<span class="op">.</span><span class="at">children</span><span class="op">.</span><span class="fu">map</span>(child <span class="kw">=&gt;</span> <span class="fu">findDepth</span>(child<span class="op">,</span> depth <span class="op">+</span> <span class="dv">1</span>)))<span class="op">;</span></span>
<span id="cb15-370"><a href="#cb15-370" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb15-371"><a href="#cb15-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-372"><a href="#cb15-372" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">findDepth</span>(tree)<span class="op">;</span></span>
<span id="cb15-373"><a href="#cb15-373" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-15" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb16" data-startfrom="378" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 377;"><span id="cb16-378"><a href="#cb16-378" aria-hidden="true" tabindex="-1"></a>imageSizeMap <span class="op">=</span> {</span>
<span id="cb16-379"><a href="#cb16-379" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> collectNodes <span class="op">=</span> node <span class="kw">=&gt;</span> _<span class="op">.</span><span class="fu">flatten</span>([node<span class="op">,</span> <span class="op">...</span>(node<span class="op">.</span><span class="at">children</span> <span class="op">?</span> node<span class="op">.</span><span class="at">children</span><span class="op">.</span><span class="fu">map</span>(collectNodes) <span class="op">:</span> [])])<span class="op">;</span></span>
<span id="cb16-380"><a href="#cb16-380" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb16-381"><a href="#cb16-381" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="fu">collectNodes</span>(tree)</span>
<span id="cb16-382"><a href="#cb16-382" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">filter</span>(d <span class="kw">=&gt;</span> d<span class="op">.</span><span class="at">img</span>)</span>
<span id="cb16-383"><a href="#cb16-383" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">map</span>(({ title<span class="op">,</span> img }) <span class="kw">=&gt;</span> {</span>
<span id="cb16-384"><a href="#cb16-384" aria-hidden="true" tabindex="-1"></a>      <span class="kw">const</span> params <span class="op">=</span> img</span>
<span id="cb16-385"><a href="#cb16-385" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">split</span>(<span class="st">'='</span>)[<span class="dv">1</span>]</span>
<span id="cb16-386"><a href="#cb16-386" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">split</span>(<span class="st">'-'</span>)</span>
<span id="cb16-387"><a href="#cb16-387" aria-hidden="true" tabindex="-1"></a>        <span class="op">.</span><span class="fu">reduce</span>((map<span class="op">,</span> param) <span class="kw">=&gt;</span> {</span>
<span id="cb16-388"><a href="#cb16-388" aria-hidden="true" tabindex="-1"></a>          map[param[<span class="dv">0</span>]] <span class="op">=</span> param<span class="op">.</span><span class="fu">slice</span>(<span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb16-389"><a href="#cb16-389" aria-hidden="true" tabindex="-1"></a>          <span class="cf">return</span> map<span class="op">;</span></span>
<span id="cb16-390"><a href="#cb16-390" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span> {})<span class="op">;</span></span>
<span id="cb16-391"><a href="#cb16-391" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb16-392"><a href="#cb16-392" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> width <span class="op">=</span> <span class="op">+</span>(params[<span class="st">'w'</span>] <span class="op">||</span> params[<span class="st">'s'</span>])<span class="op">;</span></span>
<span id="cb16-393"><a href="#cb16-393" aria-hidden="true" tabindex="-1"></a>        <span class="kw">const</span> height<span class="op">=</span> <span class="op">+</span>(params[<span class="st">'h'</span>] <span class="op">||</span> params[<span class="st">'s'</span>])<span class="op">;</span></span>
<span id="cb16-394"><a href="#cb16-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-395"><a href="#cb16-395" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> ({</span>
<span id="cb16-396"><a href="#cb16-396" aria-hidden="true" tabindex="-1"></a>          title<span class="op">,</span></span>
<span id="cb16-397"><a href="#cb16-397" aria-hidden="true" tabindex="-1"></a>          params<span class="op">,</span> </span>
<span id="cb16-398"><a href="#cb16-398" aria-hidden="true" tabindex="-1"></a>          width<span class="op">,</span></span>
<span id="cb16-399"><a href="#cb16-399" aria-hidden="true" tabindex="-1"></a>          height<span class="op">,</span></span>
<span id="cb16-400"><a href="#cb16-400" aria-hidden="true" tabindex="-1"></a>          <span class="dt">aspect</span><span class="op">:</span> height <span class="op">/</span> width<span class="op">,</span></span>
<span id="cb16-401"><a href="#cb16-401" aria-hidden="true" tabindex="-1"></a>        })<span class="op">;</span></span>
<span id="cb16-402"><a href="#cb16-402" aria-hidden="true" tabindex="-1"></a>    })</span>
<span id="cb16-403"><a href="#cb16-403" aria-hidden="true" tabindex="-1"></a>    <span class="op">.</span><span class="fu">reduce</span>((map<span class="op">,</span> size) <span class="kw">=&gt;</span> ({<span class="op">...</span>map<span class="op">,</span> [size<span class="op">.</span><span class="at">title</span>]<span class="op">:</span> size })<span class="op">,</span> {})<span class="op">;</span></span>
<span id="cb16-404"><a href="#cb16-404" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-16" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb17" data-startfrom="409" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 408;"><span id="cb17-409"><a href="#cb17-409" aria-hidden="true" tabindex="-1"></a>graphData <span class="op">=</span> {</span>
<span id="cb17-410"><a href="#cb17-410" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> nodes <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb17-411"><a href="#cb17-411" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> links <span class="op">=</span> []<span class="op">;</span></span>
<span id="cb17-412"><a href="#cb17-412" aria-hidden="true" tabindex="-1"></a>  <span class="kw">let</span> id <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb17-413"><a href="#cb17-413" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> collect <span class="op">=</span> (node<span class="op">,</span> depth <span class="op">=</span> <span class="dv">0</span>) <span class="kw">=&gt;</span> {</span>
<span id="cb17-414"><a href="#cb17-414" aria-hidden="true" tabindex="-1"></a>    nodes<span class="op">.</span><span class="fu">push</span>({<span class="op">...</span>imageSizeMap[node<span class="op">.</span><span class="at">title</span>]<span class="op">,</span> <span class="op">...</span>node<span class="op">,</span> depth<span class="op">,</span> <span class="dt">id</span><span class="op">:</span> id<span class="op">++,</span> <span class="op">...</span>(isMoble <span class="op">?</span> {<span class="dt">group</span><span class="op">:</span> <span class="st">'all'</span>} <span class="op">:</span> {})})<span class="op">;</span></span>
<span id="cb17-415"><a href="#cb17-415" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>node<span class="op">.</span><span class="at">children</span>) <span class="cf">return</span> []<span class="op">;</span></span>
<span id="cb17-416"><a href="#cb17-416" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> node<span class="op">.</span><span class="at">children</span><span class="op">.</span><span class="fu">forEach</span>(child <span class="kw">=&gt;</span> {</span>
<span id="cb17-417"><a href="#cb17-417" aria-hidden="true" tabindex="-1"></a>      links<span class="op">.</span><span class="fu">push</span>({</span>
<span id="cb17-418"><a href="#cb17-418" aria-hidden="true" tabindex="-1"></a>        <span class="dt">source</span><span class="op">:</span> node<span class="op">.</span><span class="at">title</span><span class="op">,</span></span>
<span id="cb17-419"><a href="#cb17-419" aria-hidden="true" tabindex="-1"></a>        <span class="dt">target</span><span class="op">:</span> child<span class="op">.</span><span class="at">title</span><span class="op">,</span></span>
<span id="cb17-420"><a href="#cb17-420" aria-hidden="true" tabindex="-1"></a>      })<span class="op">;</span></span>
<span id="cb17-421"><a href="#cb17-421" aria-hidden="true" tabindex="-1"></a>      <span class="fu">collect</span>(child<span class="op">,</span> depth <span class="op">+</span> <span class="dv">1</span>)<span class="op">;</span></span>
<span id="cb17-422"><a href="#cb17-422" aria-hidden="true" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb17-423"><a href="#cb17-423" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb17-424"><a href="#cb17-424" aria-hidden="true" tabindex="-1"></a>   </span>
<span id="cb17-425"><a href="#cb17-425" aria-hidden="true" tabindex="-1"></a>  <span class="fu">collect</span>(tree)<span class="op">;</span></span>
<span id="cb17-426"><a href="#cb17-426" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> { nodes<span class="op">,</span> links }<span class="op">;</span></span>
<span id="cb17-427"><a href="#cb17-427" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-17" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb18" data-startfrom="432" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 431;"><span id="cb18-432"><a href="#cb18-432" aria-hidden="true" tabindex="-1"></a>tree <span class="op">=</span> ({</span>
<span id="cb18-433"><a href="#cb18-433" aria-hidden="true" tabindex="-1"></a>  <span class="dt">title</span><span class="op">:</span> <span class="st">"Learning Themes"</span><span class="op">,</span></span>
<span id="cb18-434"><a href="#cb18-434" aria-hidden="true" tabindex="-1"></a>  <span class="dt">group</span><span class="op">:</span> <span class="st">"root"</span><span class="op">,</span></span>
<span id="cb18-435"><a href="#cb18-435" aria-hidden="true" tabindex="-1"></a>  <span class="dt">scale</span><span class="op">:</span> <span class="fl">0.94</span><span class="op">,</span></span>
<span id="cb18-436"><a href="#cb18-436" aria-hidden="true" tabindex="-1"></a>  <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-437"><a href="#cb18-437" aria-hidden="true" tabindex="-1"></a>    <span class="st">"My name is [Robert Harris](https://docs.google.com/document/d/1Whdt8nYqjG_lzdgx6BvgIFcGutiXiqNs3F5SUVPMisA/edit?usp=sharing&amp;authkey=CMnOiekK) and here you will find attached some of my visualization work created while working at [Twitter](https://twitter.com/trebor). You can peek under the hood and see how this page is constructed from an [Observable Notebook](https://observablehq.com/@trebor/portfolio) and published via [Thumbtools](https://thumbtools.org/)."</span><span class="op">,</span></span>
<span id="cb18-438"><a href="#cb18-438" aria-hidden="true" tabindex="-1"></a>  <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-439"><a href="#cb18-439" aria-hidden="true" tabindex="-1"></a>    <span class="st">"https://lh3.googleusercontent.com/pw/AM-JKLXyIIYcSSkvC6CGp7qo4UDL7o-dN2zrL215tl-kVGilitOa-Es_Dt8WrOq4VqKk_fLb9KdTBLaD8ztWYgDDZmH54ve6NLtl73V8ZHikjSGDMUS-tMVH8eqLByBB7xBtv-lpjj3JdvwZpuOSput46gPHNg=s458-no?authuser=0"</span><span class="op">,</span></span>
<span id="cb18-440"><a href="#cb18-440" aria-hidden="true" tabindex="-1"></a>  <span class="dt">children</span><span class="op">:</span> [</span>
<span id="cb18-441"><a href="#cb18-441" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb18-442"><a href="#cb18-442" aria-hidden="true" tabindex="-1"></a>      <span class="dt">title</span><span class="op">:</span> <span class="st">"Transparency Report"</span><span class="op">,</span></span>
<span id="cb18-443"><a href="#cb18-443" aria-hidden="true" tabindex="-1"></a>      <span class="dt">link</span><span class="op">:</span> <span class="st">"https://transparency.twitter.com/"</span><span class="op">,</span></span>
<span id="cb18-444"><a href="#cb18-444" aria-hidden="true" tabindex="-1"></a>      <span class="dt">group</span><span class="op">:</span> <span class="st">"trans"</span><span class="op">,</span></span>
<span id="cb18-445"><a href="#cb18-445" aria-hidden="true" tabindex="-1"></a>      <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-446"><a href="#cb18-446" aria-hidden="true" tabindex="-1"></a>        <span class="st">"This report summarizes legal requests received by Twitter and is updated twice a year.  I created all the interactive visual components and engineered them to support future report data without code changes."</span><span class="op">,</span></span>
<span id="cb18-447"><a href="#cb18-447" aria-hidden="true" tabindex="-1"></a>      <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-448"><a href="#cb18-448" aria-hidden="true" tabindex="-1"></a>        <span class="st">"https://lh3.googleusercontent.com/pw/AM-JKLXigBO-KBsubfpquO9BWa2OVsZX_KjsEhwTSnFgjF0CzQTDJVi8NYSA9wmKWxFNl-Ergz6nZXOXD9eBzCc9_cK7Z_1nqMc9SSovl1PWKJ0-vnEYL8VrPH6KHPHli5fzb7pOvKGbnabxUfyUmplmdEbdAw=w2240-h788-no"</span><span class="op">,</span></span>
<span id="cb18-449"><a href="#cb18-449" aria-hidden="true" tabindex="-1"></a>      <span class="dt">children</span><span class="op">:</span> [</span>
<span id="cb18-450"><a href="#cb18-450" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb18-451"><a href="#cb18-451" aria-hidden="true" tabindex="-1"></a>          <span class="dt">title</span><span class="op">:</span> <span class="st">"Removal Requests"</span><span class="op">,</span></span>
<span id="cb18-452"><a href="#cb18-452" aria-hidden="true" tabindex="-1"></a>          <span class="dt">link</span><span class="op">:</span> <span class="st">"https://transparency.twitter.com/en/removal-requests.html"</span><span class="op">,</span></span>
<span id="cb18-453"><a href="#cb18-453" aria-hidden="true" tabindex="-1"></a>          <span class="dt">group</span><span class="op">:</span> <span class="st">"trans"</span><span class="op">,</span></span>
<span id="cb18-454"><a href="#cb18-454" aria-hidden="true" tabindex="-1"></a>          <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-455"><a href="#cb18-455" aria-hidden="true" tabindex="-1"></a>            <span class="st">"This section shows requests received by Twitter to remove content, and the percentage of those requests granted, broken down by country.  Small countries are zoomed in on the map or would otherwise be too small to see.  Also, the underlying map data is specially treated to reduce data weight."</span><span class="op">,</span></span>
<span id="cb18-456"><a href="#cb18-456" aria-hidden="true" tabindex="-1"></a>          <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-457"><a href="#cb18-457" aria-hidden="true" tabindex="-1"></a>            <span class="st">"https://lh3.googleusercontent.com/pw/AM-JKLUqZ-ce1jf8Ilj5s0bODKk93zdnPtIXXNC58L5xoZ_r1yY9OEfuAGi_ud2AAFKcm4XblgdhFkUTqDy6QbSJherOKcXz9VUMzB1CFawNytNaQbZBO3t3bxVgXXMD7VCinSOfg9vM1iDAxrWCIQjTHmehuA=w2012-h1166-no"</span></span>
<span id="cb18-458"><a href="#cb18-458" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb18-459"><a href="#cb18-459" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb18-460"><a href="#cb18-460" aria-hidden="true" tabindex="-1"></a>          <span class="dt">title</span><span class="op">:</span> <span class="st">"Information Requests"</span><span class="op">,</span></span>
<span id="cb18-461"><a href="#cb18-461" aria-hidden="true" tabindex="-1"></a>          <span class="dt">link</span><span class="op">:</span> <span class="st">"https://transparency.twitter.com/en/information-requests.html"</span><span class="op">,</span></span>
<span id="cb18-462"><a href="#cb18-462" aria-hidden="true" tabindex="-1"></a>          <span class="dt">group</span><span class="op">:</span> <span class="st">"trans"</span><span class="op">,</span></span>
<span id="cb18-463"><a href="#cb18-463" aria-hidden="true" tabindex="-1"></a>          <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-464"><a href="#cb18-464" aria-hidden="true" tabindex="-1"></a>            <span class="st">"This section shows requests for private account information.  On the map, you can click on the US, and the map will zoom smoothly from a worldwide [Robinson](https://en.wikipedia.org/wiki/Robinson_projection) to an [Albers](https://en.wikipedia.org/wiki/Albers_projection) USA projection to breakdown requests by US state."</span><span class="op">,</span></span>
<span id="cb18-465"><a href="#cb18-465" aria-hidden="true" tabindex="-1"></a>          <span class="dt">url</span><span class="op">:</span> <span class="st">"https://transparency.twitter.com/en/information-requests.html"</span><span class="op">,</span></span>
<span id="cb18-466"><a href="#cb18-466" aria-hidden="true" tabindex="-1"></a>          <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-467"><a href="#cb18-467" aria-hidden="true" tabindex="-1"></a>            <span class="st">"https://lh3.googleusercontent.com/pw/AM-JKLUHGp8W9EwlF2jsP3KBTx_vzkMebJyM3KuV2grIcMC4Yac52U9SriMi2SbmpEcOLPwxJ03FtByK-Zr5Rp2zSsYBFg2Jo_C8fMt-dWwBLr2iFJcpQtDXf21SRxGqmaQWpNXpIzgZP5vA9oSyUlirrdcQ7A=w2016-h1168-no?authuser=0"</span></span>
<span id="cb18-468"><a href="#cb18-468" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb18-469"><a href="#cb18-469" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb18-470"><a href="#cb18-470" aria-hidden="true" tabindex="-1"></a>          <span class="dt">title</span><span class="op">:</span> <span class="st">"Copyright notices"</span><span class="op">,</span></span>
<span id="cb18-471"><a href="#cb18-471" aria-hidden="true" tabindex="-1"></a>          <span class="dt">link</span><span class="op">:</span> <span class="st">"https://transparency.twitter.com/en/copyright-notices.html"</span><span class="op">,</span></span>
<span id="cb18-472"><a href="#cb18-472" aria-hidden="true" tabindex="-1"></a>          <span class="dt">group</span><span class="op">:</span> <span class="st">"trans"</span><span class="op">,</span></span>
<span id="cb18-473"><a href="#cb18-473" aria-hidden="true" tabindex="-1"></a>          <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-474"><a href="#cb18-474" aria-hidden="true" tabindex="-1"></a>            <span class="st">"This section reports on requests to remove content that might infringe copyright.  This stream graph shows the increase in [DMCA](https://en.wikipedia.org/wiki/Digital_Millennium_Copyright_Act) takedown notices over time."</span><span class="op">,</span></span>
<span id="cb18-475"><a href="#cb18-475" aria-hidden="true" tabindex="-1"></a>          <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-476"><a href="#cb18-476" aria-hidden="true" tabindex="-1"></a>            <span class="st">"https://lh3.googleusercontent.com/pw/AM-JKLWT29F1KUiAwyqhJhUM9KWhwZHl02QDn90Gk062MOCMRddb7e4xmiJyOV1vyv8q8Fy8IESMmlr3HMabKETTm9Sank-odP6KMSmdzc2QuPq8SIMn3UVWNP4uMfzCqxOtqLt9DvVecJRvekmbVDq3v_MMeQ=w2008-h1036-no?authuser=0"</span></span>
<span id="cb18-477"><a href="#cb18-477" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb18-478"><a href="#cb18-478" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb18-479"><a href="#cb18-479" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb18-480"><a href="#cb18-480" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb18-481"><a href="#cb18-481" aria-hidden="true" tabindex="-1"></a>      <span class="dt">title</span><span class="op">:</span> <span class="st">"Nexus Navigator"</span><span class="op">,</span></span>
<span id="cb18-482"><a href="#cb18-482" aria-hidden="true" tabindex="-1"></a>      <span class="dt">group</span><span class="op">:</span> <span class="st">"nn"</span><span class="op">,</span></span>
<span id="cb18-483"><a href="#cb18-483" aria-hidden="true" tabindex="-1"></a>      <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-484"><a href="#cb18-484" aria-hidden="true" tabindex="-1"></a>        <span class="st">"The Nexus Navigator is a tool I built to investigate interactions between relatively small sets of Twitter users to highlight patterns of behavior.  The interactions are presented as a graph in the center, with filters on the left, selected interactions on the right and a timeline at the bottom."</span><span class="op">,</span></span>
<span id="cb18-485"><a href="#cb18-485" aria-hidden="true" tabindex="-1"></a>      <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-486"><a href="#cb18-486" aria-hidden="true" tabindex="-1"></a>        <span class="st">"https://lh3.googleusercontent.com/pw/AM-JKLVTF23SIdtx0AkrMR2Oa5Fxz2syZ3OGeA5tqvf_VTZ2g5IsBK5Bcks59QnAHT-FynUuohdneMMVRur6yjuMpRtoDYvLHje4Qb-qzXhjBJYPXtoWfGhcwB_7JYkIKlkdUogFrhGDRDC8L-bR7xbRaGQKFw=w1200-h976-no?authuser=0"</span><span class="op">,</span></span>
<span id="cb18-487"><a href="#cb18-487" aria-hidden="true" tabindex="-1"></a>      <span class="dt">children</span><span class="op">:</span> [</span>
<span id="cb18-488"><a href="#cb18-488" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb18-489"><a href="#cb18-489" aria-hidden="true" tabindex="-1"></a>          <span class="dt">title</span><span class="op">:</span> <span class="st">"Relationship Detail"</span><span class="op">,</span></span>
<span id="cb18-490"><a href="#cb18-490" aria-hidden="true" tabindex="-1"></a>          <span class="dt">group</span><span class="op">:</span> <span class="st">"nn"</span><span class="op">,</span></span>
<span id="cb18-491"><a href="#cb18-491" aria-hidden="true" tabindex="-1"></a>          <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-492"><a href="#cb18-492" aria-hidden="true" tabindex="-1"></a>            <span class="st">"The graph shows interactions between users.  Where possible users are bundled into groups that may be interactively expanded.  The interaction types and counts are encoded into edge shape, color and thickness."</span><span class="op">,</span></span>
<span id="cb18-493"><a href="#cb18-493" aria-hidden="true" tabindex="-1"></a>          <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-494"><a href="#cb18-494" aria-hidden="true" tabindex="-1"></a>            <span class="st">"https://lh3.googleusercontent.com/S5kWU5T-aNfOhW7lei8saHYVk3vX7HUAEFZEKX7-d5bXG0mANdJavzzaurrmDg2vJnpRPpfyuP4E9aD4vWqlzLNZki3LodWjjzBCwDNtv39LTRuhxU2Rv6-Ox3w_Zw4A1UoxxsG-OMc=w870-h838-no"</span></span>
<span id="cb18-495"><a href="#cb18-495" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb18-496"><a href="#cb18-496" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb18-497"><a href="#cb18-497" aria-hidden="true" tabindex="-1"></a>          <span class="dt">title</span><span class="op">:</span> <span class="st">"Event Timeline"</span><span class="op">,</span></span>
<span id="cb18-498"><a href="#cb18-498" aria-hidden="true" tabindex="-1"></a>          <span class="dt">group</span><span class="op">:</span> <span class="st">"nn"</span><span class="op">,</span></span>
<span id="cb18-499"><a href="#cb18-499" aria-hidden="true" tabindex="-1"></a>          <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-500"><a href="#cb18-500" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Events are summarized into a timeline to show activity peaks. When the user hovers over graph nodes or edges, the relevant events are highlighted here."</span><span class="op">,</span></span>
<span id="cb18-501"><a href="#cb18-501" aria-hidden="true" tabindex="-1"></a>          <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-502"><a href="#cb18-502" aria-hidden="true" tabindex="-1"></a>            <span class="st">"https://lh3.googleusercontent.com/NekXT3DPI8iNFLD7TI9nfo3HwUGTrzRPYKI17AVfe-8a3yhCSHxZHLW5OBFWjNGXIptN-nYN-ZR3qCy_04zC55jgXEgKEGpAKWZ8ztFcV1nCy17gHZhOFerlUQ7fJD2OCvc8XU_bOwc=w1194-h122-no"</span></span>
<span id="cb18-503"><a href="#cb18-503" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb18-504"><a href="#cb18-504" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb18-505"><a href="#cb18-505" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb18-506"><a href="#cb18-506" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb18-507"><a href="#cb18-507" aria-hidden="true" tabindex="-1"></a>      <span class="dt">title</span><span class="op">:</span> <span class="st">"US Presidential Candidate Twitter Buzz"</span><span class="op">,</span></span>
<span id="cb18-508"><a href="#cb18-508" aria-hidden="true" tabindex="-1"></a>      <span class="dt">_link</span><span class="op">:</span> <span class="st">"https://interactive.twitter.com/candidateRace16/"</span><span class="op">,</span></span>
<span id="cb18-509"><a href="#cb18-509" aria-hidden="true" tabindex="-1"></a>      <span class="dt">group</span><span class="op">:</span> <span class="st">"race"</span><span class="op">,</span></span>
<span id="cb18-510"><a href="#cb18-510" aria-hidden="true" tabindex="-1"></a>      <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-511"><a href="#cb18-511" aria-hidden="true" tabindex="-1"></a>        <span class="st">"This interactive was published leading up to the 2016 election, and updated regularly.  Initially, it shows candidates ranked by buzz on Twitter and indicates when each candidate dropped out of the race.  If you mouse over the primaries and debates you can see who participated in which."</span><span class="op">,</span></span>
<span id="cb18-512"><a href="#cb18-512" aria-hidden="true" tabindex="-1"></a>      <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-513"><a href="#cb18-513" aria-hidden="true" tabindex="-1"></a>        <span class="st">"https://lh3.googleusercontent.com/pw/AM-JKLWmewBMgAkUenTt8IjhM0MDkhLlpITWtOiKmVUl7VfUw1D7sV81QECpszGN7UUlDpNFmbRpGWgm89E3WhcZbY9JQiIV42US_YVqMc8lmu_-DfqlOuXM_wivuTgtCqZLirItRWiUoD9UzfWDAG-_if7Lrw=w2316-h1344-no?authuser=0"</span><span class="op">,</span></span>
<span id="cb18-514"><a href="#cb18-514" aria-hidden="true" tabindex="-1"></a>      <span class="dt">children</span><span class="op">:</span> [</span>
<span id="cb18-515"><a href="#cb18-515" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb18-516"><a href="#cb18-516" aria-hidden="true" tabindex="-1"></a>          <span class="dt">title</span><span class="op">:</span> <span class="st">"A Proportional View"</span><span class="op">,</span></span>
<span id="cb18-517"><a href="#cb18-517" aria-hidden="true" tabindex="-1"></a>          <span class="dt">_link</span><span class="op">:</span></span>
<span id="cb18-518"><a href="#cb18-518" aria-hidden="true" tabindex="-1"></a>            <span class="st">"https://interactive.twitter.com/candidateRace16/?metric=proportion&amp;state=AR&amp;status=active"</span><span class="op">,</span></span>
<span id="cb18-519"><a href="#cb18-519" aria-hidden="true" tabindex="-1"></a>          <span class="dt">group</span><span class="op">:</span> <span class="st">"race"</span><span class="op">,</span></span>
<span id="cb18-520"><a href="#cb18-520" aria-hidden="true" tabindex="-1"></a>          <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-521"><a href="#cb18-521" aria-hidden="true" tabindex="-1"></a>            <span class="st">"The UI provides filters, selectors, and the option to animate the race.  Shown here are how the final three candidates fared in Arkansas, proportionally, rather than by rank."</span><span class="op">,</span></span>
<span id="cb18-522"><a href="#cb18-522" aria-hidden="true" tabindex="-1"></a>          <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-523"><a href="#cb18-523" aria-hidden="true" tabindex="-1"></a>            <span class="st">"https://lh3.googleusercontent.com/pw/AM-JKLUIB35tPmVG9k4ySFLa36TgZ7XybL1T8Rl4719nkE1bTk-V3pdFUj_r3Qt1sP1Js2hZdad5C_kkWHXWMkmiAAeO6Bu9vXmO9KCE5zXcBPgXNiixI2plhijj2Emo-ngiRx33aVJxupx0pIJfwnjZmhHK9A=w2328-h1344-no?authuser=0"</span></span>
<span id="cb18-524"><a href="#cb18-524" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb18-525"><a href="#cb18-525" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb18-526"><a href="#cb18-526" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb18-527"><a href="#cb18-527" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb18-528"><a href="#cb18-528" aria-hidden="true" tabindex="-1"></a>      <span class="dt">title</span><span class="op">:</span> <span class="st">"User Cohort Flow"</span><span class="op">,</span></span>
<span id="cb18-529"><a href="#cb18-529" aria-hidden="true" tabindex="-1"></a>      <span class="dt">group</span><span class="op">:</span> <span class="st">"flow"</span><span class="op">,</span></span>
<span id="cb18-530"><a href="#cb18-530" aria-hidden="true" tabindex="-1"></a>      <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-531"><a href="#cb18-531" aria-hidden="true" tabindex="-1"></a>        <span class="st">"This chart shows the flow between different segments of Twitter users.  This internal tool was used to measure the health of various markets.  In this view, the numbers on the edges show the difference from one time period to the next.  It was also possible to show the difference between two countries to measure relative health.  The color-coding on the edges highlight segments which are in trouble."</span><span class="op">,</span></span>
<span id="cb18-532"><a href="#cb18-532" aria-hidden="true" tabindex="-1"></a>      <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-533"><a href="#cb18-533" aria-hidden="true" tabindex="-1"></a>        <span class="st">"https://lh3.googleusercontent.com/pw/AM-JKLV-xsD0o03JEGPehjpwJtNGp9gd94hKahh7pkI9BjBke1sF63p6bPxVHE9xJUAd0njRNC9mlFY1eCabwTlbXn_wWOTyA6jspUMoUETrOe_N9Un18el-riZVnwm9jaY5AXyBcRZ64T2hNiTGt7YGKMz28Q=w1047-h685-no?authuser=0"</span></span>
<span id="cb18-534"><a href="#cb18-534" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb18-535"><a href="#cb18-535" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb18-536"><a href="#cb18-536" aria-hidden="true" tabindex="-1"></a>      <span class="dt">title</span><span class="op">:</span> <span class="st">"Emoji Use on Twitter"</span><span class="op">,</span></span>
<span id="cb18-537"><a href="#cb18-537" aria-hidden="true" tabindex="-1"></a>      <span class="dt">group</span><span class="op">:</span> <span class="st">"fun"</span><span class="op">,</span></span>
<span id="cb18-538"><a href="#cb18-538" aria-hidden="true" tabindex="-1"></a>      <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-539"><a href="#cb18-539" aria-hidden="true" tabindex="-1"></a>        <span class="st">"I have had a chance to work on a number of more whimsical projects. For example, this is a prototype to show emoji use on Twitter, though it was not published.  A simple [ordered list](https://twitter.com/twitterdata/status/673905956909133824) was chosen instead.  I thought my treatment was fun if a little busy."</span><span class="op">,</span></span>
<span id="cb18-540"><a href="#cb18-540" aria-hidden="true" tabindex="-1"></a>      <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-541"><a href="#cb18-541" aria-hidden="true" tabindex="-1"></a>        <span class="st">"https://lh3.googleusercontent.com/pw/AM-JKLX347sL2tcZcjizmSO18wKI0m96tFVrXaIhdbTKl274JssVyNbQfSF_CuRsfb6eHjxZl-nB8ymzFqdNTTqde-wfavznZRphnRZHCrHzoq80DnEbLt2MukIF_gt8a75vSm32kiEzgNeszqhwF1R5Chwu3Q=w799-h599-no?authuser=0"</span><span class="op">,</span></span>
<span id="cb18-542"><a href="#cb18-542" aria-hidden="true" tabindex="-1"></a>      <span class="dt">children</span><span class="op">:</span> [</span>
<span id="cb18-543"><a href="#cb18-543" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb18-544"><a href="#cb18-544" aria-hidden="true" tabindex="-1"></a>          <span class="dt">title</span><span class="op">:</span> <span class="st">"Twitter New Year's Eve 2012"</span><span class="op">,</span></span>
<span id="cb18-545"><a href="#cb18-545" aria-hidden="true" tabindex="-1"></a>          <span class="dt">group</span><span class="op">:</span> <span class="st">"fun"</span><span class="op">,</span></span>
<span id="cb18-546"><a href="#cb18-546" aria-hidden="true" tabindex="-1"></a>          <span class="dt">link</span><span class="op">:</span></span>
<span id="cb18-547"><a href="#cb18-547" aria-hidden="true" tabindex="-1"></a>            <span class="st">"https://blog.twitter.com/official/en_us/a/2013/celebrating-2013-in-the-global-town-square.html"</span><span class="op">,</span></span>
<span id="cb18-548"><a href="#cb18-548" aria-hidden="true" tabindex="-1"></a>          <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-549"><a href="#cb18-549" aria-hidden="true" tabindex="-1"></a>            <span class="st">'This static visualization overlays the tweets per second during New Year’s Day 2012 on a globe centered on the north pole.  It is arranged such that each "midnight spike" is aligned with the geography from which those tweets would likely come.  It was discussed here on Reddit</span><span class="sc">\'</span><span class="st">s [Data Is Beautiful](https://www.reddit.com/r/dataisbeautiful/comments/15u2jy/tweets_per_second_on_nye_around_the_globe/).  I wish I had chosen better colors.'</span><span class="op">,</span></span>
<span id="cb18-550"><a href="#cb18-550" aria-hidden="true" tabindex="-1"></a>          <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-551"><a href="#cb18-551" aria-hidden="true" tabindex="-1"></a>            <span class="st">"https://lh3.googleusercontent.com/fjEuBlmZ_IYT_NItBIkG9Dj9az-j78EWrqWtrgIArmSFS62VdF3hF2jekq9BLU3ldRGoho4fDKXqG_xOe9shIyCTPLq8BllQDadB8Z3nhCCTWYeV9eyd6Nfz-wLYXISXJfpIToQXemE=s799-no"</span></span>
<span id="cb18-552"><a href="#cb18-552" aria-hidden="true" tabindex="-1"></a>        }<span class="op">,</span></span>
<span id="cb18-553"><a href="#cb18-553" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb18-554"><a href="#cb18-554" aria-hidden="true" tabindex="-1"></a>          <span class="dt">title</span><span class="op">:</span> <span class="st">"Live Geographic Aggregation"</span><span class="op">,</span></span>
<span id="cb18-555"><a href="#cb18-555" aria-hidden="true" tabindex="-1"></a>          <span class="dt">group</span><span class="op">:</span> <span class="st">"fun"</span><span class="op">,</span></span>
<span id="cb18-556"><a href="#cb18-556" aria-hidden="true" tabindex="-1"></a>          <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-557"><a href="#cb18-557" aria-hidden="true" tabindex="-1"></a>            <span class="st">"Here recent tweets from the [firehose](https://developer.twitter.com/en/docs/tweets/sample-realtime/overview/decahose.html) were grouped by hashtag or @handle, then rendered onto an ever zooming, scaling map.  Sporting events, conferences, earthquakes, and even rainbows would be highlighted.  A small time-series plot at the top of the screen showed the event trend."</span><span class="op">,</span></span>
<span id="cb18-558"><a href="#cb18-558" aria-hidden="true" tabindex="-1"></a>          <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-559"><a href="#cb18-559" aria-hidden="true" tabindex="-1"></a>            <span class="st">"https://lh3.googleusercontent.com/L5mQFj78Na-FUyOYVrRJUaWqz2xfeopI1thF6gr6jlyqoZRsPh-LfA5Tal9vcURIJqB-CBbLbimU4RInAxxqzrqihuxcnzgo7K-PTdI92sk3MCg44nJDY5vhDg9mC3sddGPuJmhr544=w1011-h631-no"</span></span>
<span id="cb18-560"><a href="#cb18-560" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb18-561"><a href="#cb18-561" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb18-562"><a href="#cb18-562" aria-hidden="true" tabindex="-1"></a>    }<span class="op">,</span></span>
<span id="cb18-563"><a href="#cb18-563" aria-hidden="true" tabindex="-1"></a>    {</span>
<span id="cb18-564"><a href="#cb18-564" aria-hidden="true" tabindex="-1"></a>      <span class="dt">title</span><span class="op">:</span> <span class="st">"Twitter Flight 2015"</span><span class="op">,</span></span>
<span id="cb18-565"><a href="#cb18-565" aria-hidden="true" tabindex="-1"></a>      <span class="dt">link</span><span class="op">:</span></span>
<span id="cb18-566"><a href="#cb18-566" aria-hidden="true" tabindex="-1"></a>        <span class="st">"https://blog.twitter.com/developer/en_us/a/2015/join-us-at-twitter-flight-2015.html"</span><span class="op">,</span></span>
<span id="cb18-567"><a href="#cb18-567" aria-hidden="true" tabindex="-1"></a>      <span class="dt">group</span><span class="op">:</span> <span class="st">"flight"</span><span class="op">,</span></span>
<span id="cb18-568"><a href="#cb18-568" aria-hidden="true" tabindex="-1"></a>      <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-569"><a href="#cb18-569" aria-hidden="true" tabindex="-1"></a>        <span class="st">'This visualization, created for [Twitter Flight 2015](https://blog.twitter.com/developer/en_us/a/2015/join-us-at-twitter-flight-2015.html), used tweets from the [firehose](https://developer.twitter.com/en/docs/tweets/sample-realtime/overview/decahose.html).  Hashtags and @handles mentioned together in the same tweet were used to create a weighted "co-mention" graph.  Periodically a [minimum spanning tree](https://en.wikipedia.org/wiki/Minimum_spanning_tree) was extracted from the graph and used to update the display.'</span><span class="op">,</span></span>
<span id="cb18-570"><a href="#cb18-570" aria-hidden="true" tabindex="-1"></a>      <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-571"><a href="#cb18-571" aria-hidden="true" tabindex="-1"></a>        <span class="st">"https://lh3.googleusercontent.com/eoBp86v6tmp1hqJaKL4l-ybqHFZW7QPsbmLsMS0zEav-DUMOk0Eb4J5llI3cE-L7Ymw5ZKjr5LZQoy_0goGlmtBeq1W7GbUhN9Mp9qvtubcpMFGfE2r_FJt23sevX8sKjqNvSnC1ODg=w585-h544-no"</span><span class="op">,</span></span>
<span id="cb18-572"><a href="#cb18-572" aria-hidden="true" tabindex="-1"></a>      <span class="dt">children</span><span class="op">:</span> [</span>
<span id="cb18-573"><a href="#cb18-573" aria-hidden="true" tabindex="-1"></a>        {</span>
<span id="cb18-574"><a href="#cb18-574" aria-hidden="true" tabindex="-1"></a>          <span class="dt">title</span><span class="op">:</span> <span class="st">"With Cats"</span><span class="op">,</span></span>
<span id="cb18-575"><a href="#cb18-575" aria-hidden="true" tabindex="-1"></a>          <span class="dt">group</span><span class="op">:</span> <span class="st">"flight"</span><span class="op">,</span></span>
<span id="cb18-576"><a href="#cb18-576" aria-hidden="true" tabindex="-1"></a>          <span class="dt">description</span><span class="op">:</span></span>
<span id="cb18-577"><a href="#cb18-577" aria-hidden="true" tabindex="-1"></a>            <span class="st">"The [linked tweet](https://twitter.com/TwitterDev/status/656534589687500800) shows how the visualization looked live with tweets filtered with the hashtag [#CATS](https://twitter.com/search?q=%23CATS&amp;src=typd).  The actual cats were added by [Twitter Comms](https://twitter.com/TwitterComms)."</span><span class="op">,</span></span>
<span id="cb18-578"><a href="#cb18-578" aria-hidden="true" tabindex="-1"></a>          <span class="dt">link</span><span class="op">:</span> <span class="st">"https://twitter.com/TwitterDev/status/656534589687500800"</span><span class="op">,</span></span>
<span id="cb18-579"><a href="#cb18-579" aria-hidden="true" tabindex="-1"></a>          <span class="dt">img</span><span class="op">:</span></span>
<span id="cb18-580"><a href="#cb18-580" aria-hidden="true" tabindex="-1"></a>            <span class="st">"https://lh3.googleusercontent.com/fL9i6gyFxqYfm9EqvKIcJNJn7mv_8QOzev56NXKO0aAiNp12QdoxZdj58xlLoEiTKMiG4nuA46U96hJalP6b99J7jFsUJbADVR7VSn5qT9mq1XawCH5eOdbg89VajXGuAUdVxY6B-3I=s320-no"</span></span>
<span id="cb18-581"><a href="#cb18-581" aria-hidden="true" tabindex="-1"></a>        }</span>
<span id="cb18-582"><a href="#cb18-582" aria-hidden="true" tabindex="-1"></a>      ]</span>
<span id="cb18-583"><a href="#cb18-583" aria-hidden="true" tabindex="-1"></a>    }</span>
<span id="cb18-584"><a href="#cb18-584" aria-hidden="true" tabindex="-1"></a>  ]</span>
<span id="cb18-585"><a href="#cb18-585" aria-hidden="true" tabindex="-1"></a>})</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-18" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb19" data-startfrom="590" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 589;"><span id="cb19-590"><a href="#cb19-590" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> { hostedOnThumbtools } <span class="im">from</span> <span class="st">"@trebor/thumbtools"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-19" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb20" data-startfrom="595" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 594;"><span id="cb20-595"><a href="#cb20-595" aria-hidden="true" tabindex="-1"></a><span class="im">import</span> {color} <span class="im">from</span> <span class="st">"@jashkenas/inputs"</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-20" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb21" data-startfrom="600" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 599;"><span id="cb21-600"><a href="#cb21-600" aria-hidden="true" tabindex="-1"></a>d3 <span class="op">=</span> <span class="pp">require</span>(<span class="st">'d3@5'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-21" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb22" data-startfrom="605" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 604;"><span id="cb22-605"><a href="#cb22-605" aria-hidden="true" tabindex="-1"></a>_ <span class="op">=</span> <span class="pp">require</span>(<span class="st">'lodash'</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-22" data-nodetype="declaration">

</div>
</div>
</div>
<div class="cell">
<div class="sourceCode cell-code hidden" id="cb23" data-startfrom="610" data-source-offset="0"><pre class="sourceCode js code-with-copy"><code class="sourceCode javascript" style="counter-reset: source-line 609;"><span id="cb23-610"><a href="#cb23-610" aria-hidden="true" tabindex="-1"></a>WAMediaBox <span class="op">=</span> {</span>
<span id="cb23-611"><a href="#cb23-611" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> url <span class="op">=</span> <span class="st">'https://raw.githubusercontent.com/trebor/wa-mediabox/master/src/wa-mediabox.js'</span><span class="op">;</span></span>
<span id="cb23-612"><a href="#cb23-612" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> response <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(url)<span class="op">;</span></span>
<span id="cb23-613"><a href="#cb23-613" aria-hidden="true" tabindex="-1"></a>  <span class="kw">const</span> blob <span class="op">=</span> <span class="cf">await</span> response<span class="op">.</span><span class="fu">blob</span>()<span class="op">;</span></span>
<span id="cb23-614"><a href="#cb23-614" aria-hidden="true" tabindex="-1"></a>  <span class="cf">return</span> <span class="pp">require</span>(URL<span class="op">.</span><span class="fu">createObjectURL</span>(blob))<span class="op">.</span><span class="fu">catch</span>(() <span class="kw">=&gt;</span> <span class="bu">window</span><span class="op">.</span><span class="at">WAMediaBox</span>)<span class="op">;</span></span>
<span id="cb23-615"><a href="#cb23-615" aria-hidden="true" tabindex="-1"></a>}</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-display">
<div id="ojs-cell-23" data-nodetype="declaration">

</div>
</div>
</div>
<section id="master-automation" class="level1">
<h1>Master Automation</h1>


</section>

</main> <!-- /main -->
<script type="ojs-module-contents">
{"contents":[{"methodName":"interpret","cellName":"ojs-cell-1","inline":false,"source":"__page = hostedOnThumbtools()\n  ? pageRenderer(graphData, width, height, false)\n  : pageRenderer(graphData, width, 800, true)\n"},{"methodName":"interpret","cellName":"ojs-cell-2","inline":false,"source":"viewof linkColor = color({\n  value: \"#aaaaaa\",\n  title: \"Link Color\"\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-3","inline":false,"source":"viewof backgroundColor = color({\n  // value: d3.color(\"rgb(253, 242, 208)\").hex(),\n  value: \"#ffffff\", // \"#f7f7f7\", //\"#f2f0e6\",\n  title: \"Background Color\"\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-4","inline":false,"source":"depthSizeScale = d3\n  .scalePow()\n  .exponent(0.7)\n  .domain([0, maxDepth])\n  .range([1, 0.6])\n"},{"methodName":"interpret","cellName":"ojs-cell-5","inline":false,"source":"strokeWidth = 4\n"},{"methodName":"interpret","cellName":"ojs-cell-6","inline":false,"source":"imageSize = 140\n"},{"methodName":"interpret","cellName":"ojs-cell-7","inline":false,"source":"depthThickScale = d3.scaleLinear().domain([0, maxDepth - 1]).range([10, 5])\n"},{"methodName":"interpret","cellName":"ojs-cell-8","inline":false,"source":"pageRenderer = (data, width, height, isTest = false) => {\n  const svg = DOM.svg(width, height);\n  \n  d3.select(svg)\n    .style('width', '100%')\n    .style('height', '100%');\n  \n  const style = isTest \n    ? 'height: ${height / 4}px;'\n    : `\n      position: absolute;\n      top: 0px;\n      bottom: 0px;\n      left: 0px;\n      right: 0px;\n    `;\n  const container = html`\n    <div style=\"\n      font-family: 'Montserrat', sans-serif;\n      background-color: ${backgroundColor};\n      ${style};\n    \">\n      <link rel='stylesheet' href='https://unpkg.com/wa-mediabox@1.0.1/dist/wa-mediabox.min.css'/> \n      <link href=\"https://fonts.googleapis.com/css?family=Montserrat\" rel=\"stylesheet\">\n      <style>\n        .__wa-mediabox-open {\n          visibility: hidden;\n        }\n\n        .wa-mediabox-frame .wa-mediabox-close {\n        \tright: 4px;\n        \ttop: 4px;\n        \twidth: 36px;\n        \theight: 36px;\n          transform: scale(${isMoble ? 3 : 0.9});\n        } \n\n        .wa-mediabox-frame {\n          top: 40%;\n          transform: scale(0.904);\n        }\n\n        .wa-mediabox-frame, .wa-mediabox-container {\n          border-top-left-radius: 5px;\n          border-top-right-radius: 5px;\n        } \n        .wa-mediabox-title {\n          font-family: 'Montserrat', sans-serif;\n          font-size: 16px;\n          background: ${backgroundColor}; \n          color: #555;\n          top: 100%;\n          bottom: auto;\n          border-bottom-left-radius: 5px;\n          border-bottom-right-radius: 5px;\n        }\n\n        .wa-mediabox-frame.loaded.has-title .wa-mediabox-title {\n          padding: 4px 14px 20px 14px;\n          user-select: all;\n        }\n\n        .wa-mediabox-title a:link, .wa-mediabox-title a:visited {\n          text-decoration: none;\n          cursor: pointer;\n          font-weight: bold;\n          color: rgb(72, 128, 184);\n        }\n\n      </style>\n\n      ${svg}\n    </div>`;\n\n  renderGraph(data, d3.select(svg), width, height);\n  return container;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-9","inline":false,"source":"renderGraph = (data, svg, width, height) => {\n  const links = data.links.map(d => Object.create(d));\n  const nodes = data.nodes.map(d => Object.create(d));\n \n  const defs = svg.append('defs');\n  defs\n    .append('svg:clipPath')\n    .attr('id', 'circle-clip')\n    .append('svg:circle')\n    .attr('cx', 0)\n    .attr('cy', 0)\n    .attr('r', imageSize / 2);\n\n  const linkForce = d3\n    .forceLink(links)\n    .id(d => d.title)\n    .distance(d => depthSizeScale(d.source.depth) * imageSize * 1.1)\n    .strength(0.8);\n    \n  const collideForce = d3.forceCollide()\n      .radius(d => imageSize / 2 * depthSizeScale(d.depth));      \n\n  const simulation = d3.forceSimulation(nodes)\n      .force(\"link\", linkForce)\n      .force(\"charge\", d3.forceManyBody().strength(-800))\n      .force(\"center\", d3.forceCenter(width / 2, height / 2))\n      .tick(80)\n      .force('collide', collideForce)\n\n  const link = svg.append(\"g\")\n    .attr(\"stroke\", linkColor)\n    .attr('fill', 'none')\n    .selectAll(\".link\")\n    .data(links)\n    .join(\"path\")\n    .classed('link', true)\n    .attr('stroke-linecap', 'round')\n    .attr(\"stroke-width\", d => depthThickScale(d.source.depth));\n\n  const node = svg.append('g')\n    .selectAll('.node')\n    .data(nodes)\n    .join('g')\n    .attr('id', d => d.title)\n    .classed('node', true)\n    .style('cursor', 'pointer')\n    .call(drag(simulation))\n    .call(renderNode);\n\n  \n  const vertPath = (x0, y0, x1, y1) => `M ${x0} ${y0} C ${x1} ${y0} ${x0} ${y1}  ${x1} ${y1}`;\n  const horzPath = (x0, y0, x1, y1) => `M ${x0} ${y0} C ${x0} ${y1}  ${x1} ${y0}  ${x1} ${y1}`;\n  \n  const pathPatternLut = [horzPath, vertPath, horzPath, vertPath];\n\n  const linkPath = ({ source: { x: x0, y: y0 }, target: { x: x1, y: y1 } }) => {\n    const quadrant = Math.round((Math.PI * 1.5 + Math.atan2(y0 - y1, x0 - x1)) \n                                / (Math.PI / 2)) % 4;\n    return pathPatternLut[quadrant](x0, y0, x1, y1);\n  };\n\n  simulation.on(\"tick\", () => {\n    link.attr('d', linkPath);\n    node.attr('transform', d => `translate(${d.x}, ${d.y}) scale(${depthSizeScale(d.depth)})`);\n  });\n\n  invalidation.then(() => simulation.stop());\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-10","inline":false,"source":"renderNode = (node) => {\n  node\n    .append(\"circle\")\n    .attr(\"href\", (d) => d.img)\n    .attr(\"r\", imageSize * 0.5 + strokeWidth / 2)\n    .attr(\"data-mediabox\", \"all\") //(d) => d.group || \"my-gallery-name\")\n    .attr(\"data-title\", (d) => \"--\")\n    .attr(\"fill\", \"rgba(255, 255, 255, 1)\")\n    .attr(\"stroke\", linkColor)\n    .attr(\"stroke-width\", strokeWidth)\n    .each(function eachCall(d) {\n      WAMediaBox.bind(d3.select(this).node(), (container) => {\n        container.innerHTML = \"\";\n        container.appendChild(renderBlurb(d));\n      });\n    });\n\n  node\n    .filter((d) => d.img)\n    .append(\"image\")\n    .attr(\"clip-path\", \"url(#circle-clip)\")\n    .attr(\n      \"xlink:href\",\n      (d) => `${d.img.split(\"=\")[0]}=${d.aspect < 1 ? \"h\" : \"w\"}${imageSize}-no`\n    )\n    .style(\"pointer-events\", \"none\")\n    .attr(\"transform\", (d) => `scale(${d.scale ? d.scale : 1})`)\n    .style(\"opacity\", 0.8)\n    .attr(\"width\", (d) => imageSize * (d.aspect > 1 ? 1 : 1 / d.aspect))\n    .attr(\"height\", (d) => imageSize * (d.aspect <= 1 ? 1 : d.aspect))\n    .attr(\"x\", (d) =>\n      d.aspect > 1\n        ? imageSize / -2\n        : `${-(d.width / 2) / (d.height / imageSize)}`\n    )\n    .attr(\"y\", (d) =>\n      d.aspect <= 1\n        ? imageSize / -2\n        : `${-(d.height / 2) / (d.width / imageSize)}`\n    );\n\n  node.append(\"title\").text((d) => d.title);\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-11","inline":false,"source":"renderBlurb = ({ title, link, description }) => {\n  const linksModified = (description || \"\").replace(\n    /\\[(.*?)\\]\\((.*?)\\)/g,\n    (match, name, url) => `<a href=\"${url}\" target=\"_blank\">${name}</a>`\n  );\n\n  return html`\n    <div style=\"user-select: ${hostedOnThumbtools() ? \"none\" : \"auto\"};\">\n    <!-- h2 style=\"${isMoble ? \"font-size: 2.1em;\" : \"\"}\">\n      ${link ? `<a href=\"${link}\" target=\"_blank\">${title}</a>` : title}\n      ${\n        link\n          ? `<a class=\"more-link\" style=\"color: rgba(184, 67, 61, 1); font-size: 0.6em; padding-left: 8px;\" href=\"${link}\" target=\"_blank\">See More</a>`\n          : \"\"\n      }\n     </h2 -->\n\n    <h2 style=\"font-size: 3.9vmin\">\n      ${link ? `<a href=\"${link}\" target=\"_blank\">${title}</a>` : title}\n      ${\n        link\n          ? `<a class=\"more-link\" style=\"color: rgba(184, 67, 61, 1); font-size: 0.6em; padding-left: 8px;\" href=\"${link}\" target=\"_blank\">See More</a>`\n          : \"\"\n      }\n     </h2>\n\n    <!-- div style=\"${\n      isMoble\n        ? \"font-size: 2.1em; line-height: 1em;\"\n        : \"font-size: 0.6m; line-height: 1.3em;\"\n    }\"\n    >\n      ${linksModified}\n    </div -->\n\n    <div style=\"${\n      isMoble\n        ? \"font-size: 3.4vmin; line-height: 3.6vmin;\"\n        : \"font-size: 2.1vmin; line-height: 2.3vmin;\"\n    }\"\n    >\n      ${linksModified}\n    </div>\n\n    <!-- div style=\"font-size: 2.6vmin; line-height: 3vmin;\">\n      ${linksModified}\n    </div -->\n\n  </div>`;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-12","inline":false,"source":"drag = simulation => {\n  \n  function dragstarted(d) {\n    if (!d3.event.active) simulation.alphaTarget(0.3).restart();\n    d.fx = d.x;\n    d.fy = d.y;\n  }\n  \n  function dragged(d) {\n    d.fx = d3.event.x;\n    d.fy = d3.event.y;\n  }\n  \n  function dragended(d) {\n    if (!d3.event.active) simulation.alphaTarget(0);\n    d.fx = null;\n    d.fy = null;\n  }\n  \n  return d3.drag()\n      .on(\"start\", dragstarted)\n      .on(\"drag\", dragged)\n      .on(\"end\", dragended);\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-13","inline":false,"source":"isMoble = {\n// device detection\nif(/(android|bb\\d+|meego).+mobile|avantgo|bada\\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|ipad|iris|kindle|Android|Silk|lge |maemo|midp|mmp|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\\.(browser|link)|vodafone|wap|windows (ce|phone)|xda|xiino/i.test(navigator.userAgent) \n    || /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\\-(n|u)|c55\\/|capi|ccwa|cdm\\-|cell|chtm|cldc|cmd\\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\\-s|devi|dica|dmob|do(c|p)o|ds(12|\\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\\-|_)|g1 u|g560|gene|gf\\-5|g\\-mo|go(\\.w|od)|gr(ad|un)|haie|hcit|hd\\-(m|p|t)|hei\\-|hi(pt|ta)|hp( i|ip)|hs\\-c|ht(c(\\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\\-(20|go|ma)|i230|iac( |\\-|\\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\\/)|klon|kpt |kwc\\-|kyo(c|k)|le(no|xi)|lg( g|\\/(k|l|u)|50|54|\\-[a-w])|libw|lynx|m1\\-w|m3ga|m50\\/|ma(te|ui|xo)|mc(01|21|ca)|m\\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\\-2|po(ck|rt|se)|prox|psio|pt\\-g|qa\\-a|qc(07|12|21|32|60|\\-[2-7]|i\\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\\-|oo|p\\-)|sdk\\/|se(c(\\-|0|1)|47|mc|nd|ri)|sgh\\-|shar|sie(\\-|m)|sk\\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\\-|v\\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\\-|tdg\\-|tel(i|m)|tim\\-|t\\-mo|to(pl|sh)|ts(70|m\\-|m3|m5)|tx\\-9|up(\\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\\-|your|zeto|zte\\-/i.test(navigator.userAgent.substr(0,4))) { \n    return true;\n}\n  return false;\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-14","inline":false,"source":"height = {\n  const body = document.body;\n  const doc = document.documentElement;\n  return Math.max(\n      body.scrollHeight, body.offsetHeight,\n      doc.clientHeight, doc.scrollHeight, doc.offsetHeight);\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-15","inline":false,"source":"maxDepth = {\n    function findDepth(node, depth = 0) {\n    if (!node.children || node.children.length === 0) {\n      return depth;\n    }\n    \n    return d3.max(node.children.map(child => findDepth(child, depth + 1)));\n  }\n\n  return findDepth(tree);\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-16","inline":false,"source":"imageSizeMap = {\n  const collectNodes = node => _.flatten([node, ...(node.children ? node.children.map(collectNodes) : [])]);\n  \n  return collectNodes(tree)\n    .filter(d => d.img)\n    .map(({ title, img }) => {\n      const params = img\n        .split('=')[1]\n        .split('-')\n        .reduce((map, param) => {\n          map[param[0]] = param.slice(1);\n          return map;\n        }, {});\n    \n        const width = +(params['w'] || params['s']);\n        const height= +(params['h'] || params['s']);\n\n        return ({\n          title,\n          params, \n          width,\n          height,\n          aspect: height / width,\n        });\n    })\n    .reduce((map, size) => ({...map, [size.title]: size }), {});\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-17","inline":false,"source":"graphData = {\n  const nodes = [];\n  const links = [];\n  let id = 0;\n  const collect = (node, depth = 0) => {\n    nodes.push({...imageSizeMap[node.title], ...node, depth, id: id++, ...(isMoble ? {group: 'all'} : {})});\n    if (!node.children) return [];\n    return node.children.forEach(child => {\n      links.push({\n        source: node.title,\n        target: child.title,\n      });\n      collect(child, depth + 1);\n    });\n  }\n   \n  collect(tree);\n  return { nodes, links };\n}\n"},{"methodName":"interpret","cellName":"ojs-cell-18","inline":false,"source":"tree = ({\n  title: \"Learning Themes\",\n  group: \"root\",\n  scale: 0.94,\n  description:\n    \"My name is [Robert Harris](https://docs.google.com/document/d/1Whdt8nYqjG_lzdgx6BvgIFcGutiXiqNs3F5SUVPMisA/edit?usp=sharing&authkey=CMnOiekK) and here you will find attached some of my visualization work created while working at [Twitter](https://twitter.com/trebor). You can peek under the hood and see how this page is constructed from an [Observable Notebook](https://observablehq.com/@trebor/portfolio) and published via [Thumbtools](https://thumbtools.org/).\",\n  img:\n    \"https://lh3.googleusercontent.com/pw/AM-JKLXyIIYcSSkvC6CGp7qo4UDL7o-dN2zrL215tl-kVGilitOa-Es_Dt8WrOq4VqKk_fLb9KdTBLaD8ztWYgDDZmH54ve6NLtl73V8ZHikjSGDMUS-tMVH8eqLByBB7xBtv-lpjj3JdvwZpuOSput46gPHNg=s458-no?authuser=0\",\n  children: [\n    {\n      title: \"Transparency Report\",\n      link: \"https://transparency.twitter.com/\",\n      group: \"trans\",\n      description:\n        \"This report summarizes legal requests received by Twitter and is updated twice a year.  I created all the interactive visual components and engineered them to support future report data without code changes.\",\n      img:\n        \"https://lh3.googleusercontent.com/pw/AM-JKLXigBO-KBsubfpquO9BWa2OVsZX_KjsEhwTSnFgjF0CzQTDJVi8NYSA9wmKWxFNl-Ergz6nZXOXD9eBzCc9_cK7Z_1nqMc9SSovl1PWKJ0-vnEYL8VrPH6KHPHli5fzb7pOvKGbnabxUfyUmplmdEbdAw=w2240-h788-no\",\n      children: [\n        {\n          title: \"Removal Requests\",\n          link: \"https://transparency.twitter.com/en/removal-requests.html\",\n          group: \"trans\",\n          description:\n            \"This section shows requests received by Twitter to remove content, and the percentage of those requests granted, broken down by country.  Small countries are zoomed in on the map or would otherwise be too small to see.  Also, the underlying map data is specially treated to reduce data weight.\",\n          img:\n            \"https://lh3.googleusercontent.com/pw/AM-JKLUqZ-ce1jf8Ilj5s0bODKk93zdnPtIXXNC58L5xoZ_r1yY9OEfuAGi_ud2AAFKcm4XblgdhFkUTqDy6QbSJherOKcXz9VUMzB1CFawNytNaQbZBO3t3bxVgXXMD7VCinSOfg9vM1iDAxrWCIQjTHmehuA=w2012-h1166-no\"\n        },\n        {\n          title: \"Information Requests\",\n          link: \"https://transparency.twitter.com/en/information-requests.html\",\n          group: \"trans\",\n          description:\n            \"This section shows requests for private account information.  On the map, you can click on the US, and the map will zoom smoothly from a worldwide [Robinson](https://en.wikipedia.org/wiki/Robinson_projection) to an [Albers](https://en.wikipedia.org/wiki/Albers_projection) USA projection to breakdown requests by US state.\",\n          url: \"https://transparency.twitter.com/en/information-requests.html\",\n          img:\n            \"https://lh3.googleusercontent.com/pw/AM-JKLUHGp8W9EwlF2jsP3KBTx_vzkMebJyM3KuV2grIcMC4Yac52U9SriMi2SbmpEcOLPwxJ03FtByK-Zr5Rp2zSsYBFg2Jo_C8fMt-dWwBLr2iFJcpQtDXf21SRxGqmaQWpNXpIzgZP5vA9oSyUlirrdcQ7A=w2016-h1168-no?authuser=0\"\n        },\n        {\n          title: \"Copyright notices\",\n          link: \"https://transparency.twitter.com/en/copyright-notices.html\",\n          group: \"trans\",\n          description:\n            \"This section reports on requests to remove content that might infringe copyright.  This stream graph shows the increase in [DMCA](https://en.wikipedia.org/wiki/Digital_Millennium_Copyright_Act) takedown notices over time.\",\n          img:\n            \"https://lh3.googleusercontent.com/pw/AM-JKLWT29F1KUiAwyqhJhUM9KWhwZHl02QDn90Gk062MOCMRddb7e4xmiJyOV1vyv8q8Fy8IESMmlr3HMabKETTm9Sank-odP6KMSmdzc2QuPq8SIMn3UVWNP4uMfzCqxOtqLt9DvVecJRvekmbVDq3v_MMeQ=w2008-h1036-no?authuser=0\"\n        }\n      ]\n    },\n    {\n      title: \"Nexus Navigator\",\n      group: \"nn\",\n      description:\n        \"The Nexus Navigator is a tool I built to investigate interactions between relatively small sets of Twitter users to highlight patterns of behavior.  The interactions are presented as a graph in the center, with filters on the left, selected interactions on the right and a timeline at the bottom.\",\n      img:\n        \"https://lh3.googleusercontent.com/pw/AM-JKLVTF23SIdtx0AkrMR2Oa5Fxz2syZ3OGeA5tqvf_VTZ2g5IsBK5Bcks59QnAHT-FynUuohdneMMVRur6yjuMpRtoDYvLHje4Qb-qzXhjBJYPXtoWfGhcwB_7JYkIKlkdUogFrhGDRDC8L-bR7xbRaGQKFw=w1200-h976-no?authuser=0\",\n      children: [\n        {\n          title: \"Relationship Detail\",\n          group: \"nn\",\n          description:\n            \"The graph shows interactions between users.  Where possible users are bundled into groups that may be interactively expanded.  The interaction types and counts are encoded into edge shape, color and thickness.\",\n          img:\n            \"https://lh3.googleusercontent.com/S5kWU5T-aNfOhW7lei8saHYVk3vX7HUAEFZEKX7-d5bXG0mANdJavzzaurrmDg2vJnpRPpfyuP4E9aD4vWqlzLNZki3LodWjjzBCwDNtv39LTRuhxU2Rv6-Ox3w_Zw4A1UoxxsG-OMc=w870-h838-no\"\n        },\n        {\n          title: \"Event Timeline\",\n          group: \"nn\",\n          description:\n            \"Events are summarized into a timeline to show activity peaks. When the user hovers over graph nodes or edges, the relevant events are highlighted here.\",\n          img:\n            \"https://lh3.googleusercontent.com/NekXT3DPI8iNFLD7TI9nfo3HwUGTrzRPYKI17AVfe-8a3yhCSHxZHLW5OBFWjNGXIptN-nYN-ZR3qCy_04zC55jgXEgKEGpAKWZ8ztFcV1nCy17gHZhOFerlUQ7fJD2OCvc8XU_bOwc=w1194-h122-no\"\n        }\n      ]\n    },\n    {\n      title: \"US Presidential Candidate Twitter Buzz\",\n      _link: \"https://interactive.twitter.com/candidateRace16/\",\n      group: \"race\",\n      description:\n        \"This interactive was published leading up to the 2016 election, and updated regularly.  Initially, it shows candidates ranked by buzz on Twitter and indicates when each candidate dropped out of the race.  If you mouse over the primaries and debates you can see who participated in which.\",\n      img:\n        \"https://lh3.googleusercontent.com/pw/AM-JKLWmewBMgAkUenTt8IjhM0MDkhLlpITWtOiKmVUl7VfUw1D7sV81QECpszGN7UUlDpNFmbRpGWgm89E3WhcZbY9JQiIV42US_YVqMc8lmu_-DfqlOuXM_wivuTgtCqZLirItRWiUoD9UzfWDAG-_if7Lrw=w2316-h1344-no?authuser=0\",\n      children: [\n        {\n          title: \"A Proportional View\",\n          _link:\n            \"https://interactive.twitter.com/candidateRace16/?metric=proportion&state=AR&status=active\",\n          group: \"race\",\n          description:\n            \"The UI provides filters, selectors, and the option to animate the race.  Shown here are how the final three candidates fared in Arkansas, proportionally, rather than by rank.\",\n          img:\n            \"https://lh3.googleusercontent.com/pw/AM-JKLUIB35tPmVG9k4ySFLa36TgZ7XybL1T8Rl4719nkE1bTk-V3pdFUj_r3Qt1sP1Js2hZdad5C_kkWHXWMkmiAAeO6Bu9vXmO9KCE5zXcBPgXNiixI2plhijj2Emo-ngiRx33aVJxupx0pIJfwnjZmhHK9A=w2328-h1344-no?authuser=0\"\n        }\n      ]\n    },\n    {\n      title: \"User Cohort Flow\",\n      group: \"flow\",\n      description:\n        \"This chart shows the flow between different segments of Twitter users.  This internal tool was used to measure the health of various markets.  In this view, the numbers on the edges show the difference from one time period to the next.  It was also possible to show the difference between two countries to measure relative health.  The color-coding on the edges highlight segments which are in trouble.\",\n      img:\n        \"https://lh3.googleusercontent.com/pw/AM-JKLV-xsD0o03JEGPehjpwJtNGp9gd94hKahh7pkI9BjBke1sF63p6bPxVHE9xJUAd0njRNC9mlFY1eCabwTlbXn_wWOTyA6jspUMoUETrOe_N9Un18el-riZVnwm9jaY5AXyBcRZ64T2hNiTGt7YGKMz28Q=w1047-h685-no?authuser=0\"\n    },\n    {\n      title: \"Emoji Use on Twitter\",\n      group: \"fun\",\n      description:\n        \"I have had a chance to work on a number of more whimsical projects. For example, this is a prototype to show emoji use on Twitter, though it was not published.  A simple [ordered list](https://twitter.com/twitterdata/status/673905956909133824) was chosen instead.  I thought my treatment was fun if a little busy.\",\n      img:\n        \"https://lh3.googleusercontent.com/pw/AM-JKLX347sL2tcZcjizmSO18wKI0m96tFVrXaIhdbTKl274JssVyNbQfSF_CuRsfb6eHjxZl-nB8ymzFqdNTTqde-wfavznZRphnRZHCrHzoq80DnEbLt2MukIF_gt8a75vSm32kiEzgNeszqhwF1R5Chwu3Q=w799-h599-no?authuser=0\",\n      children: [\n        {\n          title: \"Twitter New Year's Eve 2012\",\n          group: \"fun\",\n          link:\n            \"https://blog.twitter.com/official/en_us/a/2013/celebrating-2013-in-the-global-town-square.html\",\n          description:\n            'This static visualization overlays the tweets per second during New Year’s Day 2012 on a globe centered on the north pole.  It is arranged such that each \"midnight spike\" is aligned with the geography from which those tweets would likely come.  It was discussed here on Reddit\\'s [Data Is Beautiful](https://www.reddit.com/r/dataisbeautiful/comments/15u2jy/tweets_per_second_on_nye_around_the_globe/).  I wish I had chosen better colors.',\n          img:\n            \"https://lh3.googleusercontent.com/fjEuBlmZ_IYT_NItBIkG9Dj9az-j78EWrqWtrgIArmSFS62VdF3hF2jekq9BLU3ldRGoho4fDKXqG_xOe9shIyCTPLq8BllQDadB8Z3nhCCTWYeV9eyd6Nfz-wLYXISXJfpIToQXemE=s799-no\"\n        },\n        {\n          title: \"Live Geographic Aggregation\",\n          group: \"fun\",\n          description:\n            \"Here recent tweets from the [firehose](https://developer.twitter.com/en/docs/tweets/sample-realtime/overview/decahose.html) were grouped by hashtag or @handle, then rendered onto an ever zooming, scaling map.  Sporting events, conferences, earthquakes, and even rainbows would be highlighted.  A small time-series plot at the top of the screen showed the event trend.\",\n          img:\n            \"https://lh3.googleusercontent.com/L5mQFj78Na-FUyOYVrRJUaWqz2xfeopI1thF6gr6jlyqoZRsPh-LfA5Tal9vcURIJqB-CBbLbimU4RInAxxqzrqihuxcnzgo7K-PTdI92sk3MCg44nJDY5vhDg9mC3sddGPuJmhr544=w1011-h631-no\"\n        }\n      ]\n    },\n    {\n      title: \"Twitter Flight 2015\",\n      link:\n        \"https://blog.twitter.com/developer/en_us/a/2015/join-us-at-twitter-flight-2015.html\",\n      group: \"flight\",\n      description:\n        'This visualization, created for [Twitter Flight 2015](https://blog.twitter.com/developer/en_us/a/2015/join-us-at-twitter-flight-2015.html), used tweets from the [firehose](https://developer.twitter.com/en/docs/tweets/sample-realtime/overview/decahose.html).  Hashtags and @handles mentioned together in the same tweet were used to create a weighted \"co-mention\" graph.  Periodically a [minimum spanning tree](https://en.wikipedia.org/wiki/Minimum_spanning_tree) was extracted from the graph and used to update the display.',\n      img:\n        \"https://lh3.googleusercontent.com/eoBp86v6tmp1hqJaKL4l-ybqHFZW7QPsbmLsMS0zEav-DUMOk0Eb4J5llI3cE-L7Ymw5ZKjr5LZQoy_0goGlmtBeq1W7GbUhN9Mp9qvtubcpMFGfE2r_FJt23sevX8sKjqNvSnC1ODg=w585-h544-no\",\n      children: [\n        {\n          title: \"With Cats\",\n          group: \"flight\",\n          description:\n            \"The [linked tweet](https://twitter.com/TwitterDev/status/656534589687500800) shows how the visualization looked live with tweets filtered with the hashtag [#CATS](https://twitter.com/search?q=%23CATS&src=typd).  The actual cats were added by [Twitter Comms](https://twitter.com/TwitterComms).\",\n          link: \"https://twitter.com/TwitterDev/status/656534589687500800\",\n          img:\n            \"https://lh3.googleusercontent.com/fL9i6gyFxqYfm9EqvKIcJNJn7mv_8QOzev56NXKO0aAiNp12QdoxZdj58xlLoEiTKMiG4nuA46U96hJalP6b99J7jFsUJbADVR7VSn5qT9mq1XawCH5eOdbg89VajXGuAUdVxY6B-3I=s320-no\"\n        }\n      ]\n    }\n  ]\n})\n"},{"methodName":"interpret","cellName":"ojs-cell-19","inline":false,"source":"import { hostedOnThumbtools } from \"@trebor/thumbtools\"\n"},{"methodName":"interpret","cellName":"ojs-cell-20","inline":false,"source":"import {color} from \"@jashkenas/inputs\"\n"},{"methodName":"interpret","cellName":"ojs-cell-21","inline":false,"source":"d3 = require('d3@5')\n"},{"methodName":"interpret","cellName":"ojs-cell-22","inline":false,"source":"_ = require('lodash')\n"},{"methodName":"interpret","cellName":"ojs-cell-23","inline":false,"source":"WAMediaBox = {\n  const url = 'https://raw.githubusercontent.com/trebor/wa-mediabox/master/src/wa-mediabox.js';\n  const response = await fetch(url);\n  const blob = await response.blob();\n  return require(URL.createObjectURL(blob)).catch(() => window.WAMediaBox);\n}\n"},{"methodName":"interpretQuiet","source":"shinyInput('linkColor')"},{"methodName":"interpretQuiet","source":"shinyInput('backgroundColor')"}]}
</script>
<script type="module">
window._ojs.paths.runtimeToDoc = "../..";
window._ojs.paths.runtimeToRoot = "../..";
window._ojs.paths.docToRoot = "";
window._ojs.selfContained = false;
window._ojs.runtime.interpretFromScriptTags();
</script>
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>